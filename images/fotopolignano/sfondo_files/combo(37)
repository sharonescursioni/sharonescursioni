YUI.add("hermes-template-blog-rail-content",(function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,t,a){var o,i,r=l.escapeExpression,s=l.lambda,c=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t<a class="blog-photo" href="'+r("function"==typeof(i=null!=(i=c(e,"link")||(null!=n?c(n,"link"):n))?i:l.hooks.helperMissing)?i.call(null!=n?n:l.nullContext||{},{name:"link",hash:{},data:a,loc:{start:{line:3,column:30},end:{line:3,column:38}}}):i)+'" target="_blank"\n\t\t\tstyle="background-image: url(\''+r(s(null!=(o=null!=n?c(n,"photo"):n)?c(o,"displayUrl"):o,n))+"'); width: "+r(s(null!=(o=null!=n?c(n,"photo"):n)?c(o,"width"):o,n))+"px; height: "+r(s(null!=(o=null!=n?c(n,"photo"):n)?c(o,"height"):o,n))+'px;">\n\t\t</a>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,e,t,a){var o,i,r=null!=n?n:l.nullContext||{},s=l.hooks.helperMissing,c="function",u=l.escapeExpression,p=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="blog-rail-content">\n'+(null!=(o=p(e,"if").call(r,null!=n?p(n,"photo"):n,{name:"if",hash:{},fn:l.program(1,a,0),inverse:l.noop,data:a,loc:{start:{line:2,column:1},end:{line:6,column:8}}}))?o:"")+'\t<a class="blog-title" href="'+u(typeof(i=null!=(i=p(e,"link")||(null!=n?p(n,"link"):n))?i:s)===c?i.call(r,{name:"link",hash:{},data:a,loc:{start:{line:7,column:29},end:{line:7,column:37}}}):i)+'" target="_blank">\n\t\t'+u(typeof(i=null!=(i=p(e,"title")||(null!=n?p(n,"title"):n))?i:s)===c?i.call(r,{name:"title",hash:{},data:a,loc:{start:{line:8,column:2},end:{line:8,column:11}}}):i)+'\n\t</a>\n\t<p class="blog-description">\n\t\t'+u(typeof(i=null!=(i=p(e,"description")||(null!=n?p(n,"description"):n))?i:s)===c?i.call(r,{name:"description",hash:{},data:a,loc:{start:{line:11,column:2},end:{line:11,column:17}}}):i)+'\n\t</p>\n\t<a class="learn-more-link" href="'+u(typeof(i=null!=(i=p(e,"link")||(null!=n?p(n,"link"):n))?i:s)===c?i.call(r,{name:"link",hash:{},data:a,loc:{start:{line:13,column:34},end:{line:13,column:42}}}):i)+'" target="_blank">'+u((p(e,"intlMessage")||n&&p(n,"intlMessage")||s).call(r,{name:"intlMessage",hash:{intlName:"feed.READ_MORE"},data:a,loc:{start:{line:13,column:60},end:{line:13,column:101}}}))+"</a>\n</div>\n"},useData:!0}),t={};l.Array.each([],(function(n){var e=l.Template.get("hermes/"+n);e&&(t[n]=e)})),l.Template.register("hermes/blog-rail-content",(function(n,a){return(a=a||{}).partials=a.partials?l.merge(t,a.partials):t,e(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("flickr-feed-getLatestFlickrBlog-fetcher",(function(e,t){"use strict";e.namespace("ModelFetchers")["flickr-feed-getLatestFlickrBlog"]={run:function(o,r){var i=this;return e.FlickrPromise({apiResponse:r.callAPI("flickr.feed.getLatestFlickrBlog",this._processParams(o),!0),blogModelRegistry:r.getModelRegistry("blog-models")}).then((function(e){return i._processResponse(e,o)}),(function(e){throw e})).then(null,e.FetcherErrorLogger(t))},_processParams:function(e){return{}},_processResponse:function(t,o){var r,i=t.apiResponse,s=t.blogModelRegistry;return r={id:"latest",blogId:i.guid,title:i.title,date:i.date,link:i.link,description:i.description,photoId:i.photoId,photoData:{id:i.photo.id,title:i.photo.title,description:i.photo.description,sizes:e.APIHelper.response.parsePhotoSize(i.photo.sizes.size,!0)}},s.addOrUpdate(r)}}}),"@VERSION@",{requires:["flickr-promise","api-helper"],optional:["photo-models"]});YUI.add("blog-models",(function(e){function t(e){t.superclass.constructor.call(this,e)}e.Models[this.name]=t,e.extend(t,e.FlickrModelRegistry,{name:this.name,remote:{read:function(t){return e.ModelFetchers["flickr-feed-getLatestFlickrBlog"].run(t,this.appContext)}},attributes:{id:{},blogId:{},title:{},date:{},link:{},description:{},photoId:{},photoData:{}}})}),"@VERSION@",{requires:["flickr-model-registry","moment","flickr-feed-getLatestFlickrBlog-fetcher"]});YUI.add("blog-rail-card-view",(function(e,t){require("hermes-core/flog")(t);e.namespace("Views")[this.name]=e.Base.create("blog-rail-card-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){this.params=t,this.blogItem=t.blogItem,this.photoSizeHelper=new e.PhotoSizeHelper(this.appContext),this.viewCounter=this.appContext.getViewCounter()},loadState:function(){return e.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("blog-rail-card",{})},activate:function(){var t=this,i=this.get("container");return this.isRerender||e.Analytics.sendClick("Rail Card Type: Blog","Rail Card Loaded"),this.dummyLoaderNode=i.one(".dummy-loader"),this.blogContainerNode=i.one(".blog-rail-content-container"),this.currentContainerWidth=i.get("clientWidth"),this.registerEventHandler(e.globalEvents.subscribe("window:resize",e.betterThrottle(this.handlePageResize.bind(this),1e3,this,!0))),(this.blogItem?e.Promise.resolve():this.loadBlog()).then((function(){t.buildLayout()})).then((function(){t.viewCounter.queue(t.blogItem.photoData.id,document.location.href),t.dummyLoaderNode.addClass("hidden")}))},buildLayout:function(){this.blogItem;var e,t={title:this.blogItem.title,description:this.blogItem.description,link:this.blogItem.link};if(this.blogContainerNode.removeClass("hidden"),this.blogItem.photoData&&this.blogItem.photoData.id){var i,o,n=this.blogItem.photoData.sizes,r=this.photoSizeHelper.getPhotoAspectRatio(n);i=this.blogContainerNode.get("clientWidth"),o=this.photoSizeHelper.getSizeToFit(n,{width:i,height:i/r},{includeSquare:!1}),t.photo={displayUrl:o.displayUrl,width:i,height:i/r}}e=this.templates("blog-rail-content")(t),this.blogContainerNode.set("innerHTML",e)},loadBlog:function(){var e=this;return this.appContext.getModel("blog-models","latest").then((function(t){e.blogItem=t.toJSON()}))},handlePageResize:function(){var e=this.get("container").get("clientWidth");e!==this.currentContainerWidth&&(this.currentContainerWidth=e,this.rerender())},rerender:function(){this.isRerender=!0,this.detachRegisteredEvents(),this.buildContainer(),this.activate()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-blog-rail-card","hermes-template-blog-rail-content","blog-models","photo-size-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-static-content-rail-card",(function(t,e){var a=t.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(t,e,a,n,i){var s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="static-content-rail-card">\n\t<h2 class="title">\n\t\t'+t.escapeExpression((s(a,"intlMessage")||e&&s(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{intlName:"feed.FLICKR_EDITORIAL"},data:i,loc:{start:{line:3,column:2},end:{line:3,column:50}}}))+'\n\t</h2>\n\n\t<div class="static-content-rail-content-container hidden">\n\t\t\n\t</div>\n\t<div class="dummy-loader">\n\t\t<div class="box" style="height: 140px; width: 100%"></div>\n\t\t<div class="box" style="height: 14px; width: 100%"></div>\n\t\t<div class="box" style="height: 80px; width: 100%"></div>\n\t\t<div class="box" style="height: 14px; width: 80%"></div>\n\t</div>\n</div>\n'},useData:!0}),n={};t.Array.each([],(function(e){var a=t.Template.get("hermes/"+e);a&&(n[e]=a)})),t.Template.register("hermes/static-content-rail-card",(function(e,i){return(i=i||{}).partials=i.partials?t.merge(n,i.partials):n,a(e,i)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("hermes-template-static-content-rail-content",(function(t,n){var l=t.Template.Handlebars.revive({1:function(t,n,l,e,a){var i,o=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'\t\t\t\t<hr />\n\t\t\t\t<span class="photo-subtitle">\n\t\t\t\t\t'+t.escapeExpression("function"==typeof(i=null!=(i=o(l,"subtitle")||(null!=n?o(n,"subtitle"):n))?i:t.hooks.helperMissing)?i.call(null!=n?n:t.nullContext||{},{name:"subtitle",hash:{},data:a,loc:{start:{line:11,column:5},end:{line:11,column:17}}}):i)+"\n\t\t\t\t</span>\n"},compiler:[8,">= 4.3.0"],main:function(t,n,l,e,a){var i,o,s=null!=n?n:t.nullContext||{},r=t.hooks.helperMissing,c="function",u=t.escapeExpression,p=t.lambda,h=t.lookupProperty||function(t,n){if(Object.prototype.hasOwnProperty.call(t,n))return t[n]};return'<div class="static-content-rail-content">\n\t<a class="static-content-photo" href="'+u(typeof(o=null!=(o=h(l,"link")||(null!=n?h(n,"link"):n))?o:r)===c?o.call(s,{name:"link",hash:{},data:a,loc:{start:{line:2,column:39},end:{line:2,column:47}}}):o)+'" target="_blank"\n\t\tstyle="background-image: url(\''+u(p(null!=(i=null!=n?h(n,"photo"):n)?h(i,"displayUrl"):i,n))+"'); width: "+u(p(null!=(i=null!=n?h(n,"photo"):n)?h(i,"width"):i,n))+"px; height: "+u(p(null!=(i=null!=n?h(n,"photo"):n)?h(i,"height"):i,n))+'px;">\n\t\t<div class="photo-overlay">\n\t\t\t<span class="photo-title">\n\t\t\t\t'+u(typeof(o=null!=(o=h(l,"title")||(null!=n?h(n,"title"):n))?o:r)===c?o.call(s,{name:"title",hash:{},data:a,loc:{start:{line:6,column:4},end:{line:6,column:13}}}):o)+"\n\t\t\t</span>\n"+(null!=(i=h(l,"if").call(s,null!=n?h(n,"subtitle"):n,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.noop,data:a,loc:{start:{line:8,column:3},end:{line:13,column:10}}}))?i:"")+'\t\t\t<span class="photo-attribution">\n\t\t\t\t'+u((h(l,"intlMessage")||n&&h(n,"intlMessage")||r).call(s,{name:"intlMessage",hash:{username:null!=(i=null!=(i=null!=n?h(n,"photo"):n)?h(i,"owner"):i)?h(i,"displayname"):i,intlName:"feed.PHOTO_BY"},data:a,loc:{start:{line:15,column:4},end:{line:15,column:77}}}))+'\n\t\t\t</span>\n\t\t</div>\n\t</a>\n\t\n\t<p class="static-content-description">\n\t\t'+u(typeof(o=null!=(o=h(l,"description")||(null!=n?h(n,"description"):n))?o:r)===c?o.call(s,{name:"description",hash:{},data:a,loc:{start:{line:21,column:2},end:{line:21,column:17}}}):o)+'\n\t</p>\n\t<a class="learn-more-link" href="'+u(typeof(o=null!=(o=h(l,"link")||(null!=n?h(n,"link"):n))?o:r)===c?o.call(s,{name:"link",hash:{},data:a,loc:{start:{line:23,column:34},end:{line:23,column:42}}}):o)+'" target="_blank">'+u((h(l,"intlMessage")||n&&h(n,"intlMessage")||r).call(s,{name:"intlMessage",hash:{intlName:"feed.READ_MORE"},data:a,loc:{start:{line:23,column:60},end:{line:23,column:101}}}))+"</a>\n</div>\n"},useData:!0}),e={};t.Array.each([],(function(n){var l=t.Template.get("hermes/"+n);l&&(e[n]=l)})),t.Template.register("hermes/static-content-rail-content",(function(n,a){return(a=a||{}).partials=a.partials?t.merge(e,a.partials):e,l(n,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("static-content-rail-card-view",(function(t,e){require("hermes-core/flog")(e);t.namespace("Views")[this.name]=t.Base.create("static-content-rail-card-view",t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e,this.staticContentItem=e.staticContentItem,this.photoSizeHelper=new t.PhotoSizeHelper(this.appContext),this.viewCounter=this.appContext.getViewCounter()},loadState:function(){return t.Promise.resolve()},buildContainer:function(){this.setContainerWithTemplate("static-content-rail-card",{})},activate:function(){var e,i=this,n=this.get("container");return this.isRerender||t.Analytics.sendClick("Rail Card Type: Static Content","Rail Card Loaded"),this.dummyLoaderNode=n.one(".dummy-loader"),this.staticContentContainerNode=n.one(".static-content-rail-content-container"),this.currentContainerWidth=n.get("clientWidth"),this.registerEventHandler(t.globalEvents.subscribe("window:resize",t.betterThrottle(this.handlePageResize.bind(this),1e3,this,!0))),this.staticContentItem&&(e=t.Promise.resolve()),e.then((function(){i.buildLayout()})).then((function(){i.viewCounter.queue(i.staticContentItem.photoData.id,document.location.href),i.dummyLoaderNode.addClass("hidden")}))},buildLayout:function(){this.staticContentItem;var t,e,i,n={title:this.staticContentItem.title,subtitle:this.staticContentItem.subtitle,description:this.staticContentItem.description,link:this.staticContentItem.link},o=this.staticContentItem.photoData.sizes,s=this.photoSizeHelper.getPhotoAspectRatio(o);this.staticContentContainerNode.removeClass("hidden"),e=this.staticContentContainerNode.get("clientWidth"),i=this.photoSizeHelper.getSizeToFit(o,{width:e,height:e/s},{includeSquare:!1}),n.photo={displayUrl:i.displayUrl,width:e,height:e/s,owner:this.staticContentItem.photoData.owner},t=this.templates("static-content-rail-content")(n),this.staticContentContainerNode.set("innerHTML",t)},handlePageResize:function(){var t=this.get("container").get("clientWidth");t!==this.currentContainerWidth&&(this.currentContainerWidth=t,this.rerender())},rerender:function(){this.isRerender=!0,this.detachRegisteredEvents(),this.buildContainer(),this.activate()}})}),"@VERSION@",{requires:["flickr-view","hermes-template-static-content-rail-card","hermes-template-static-content-rail-content","photo-size-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});