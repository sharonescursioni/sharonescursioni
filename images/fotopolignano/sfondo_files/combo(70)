YUI.add("hermes-template-moola-search-view",(function(a,l){var e=a.Template.Handlebars.revive({compiler:[8,">= 4.3.0"],main:function(a,l,e,n,t){var i,o,r=a.lambda,s=a.escapeExpression,d=null!=l?l:a.nullContext||{},p=a.hooks.helperMissing,u=a.lookupProperty||function(a,l){if(Object.prototype.hasOwnProperty.call(a,l))return a[l]};return'<div class="moola-search-view-main-container">\n\t<div class="'+s(r(null!=(i=null!=l?u(l,"classes"):l)?u(i,"container"):i,l))+'">\n\t\t<div class="'+s(r(null!=(i=null!=l?u(l,"classes"):l)?u(i,"adA"):i,l))+'">\n'+(null!=(i=a.invokePartial(u(n,"prbd-moola-position"),l,{name:"prbd-moola-position",hash:{upgradeProLink:!1,advertisingStitching:null!=l?u(l,"advertisingStitching"):l,upsellFallback:!1,adUnit:null!=(i=null!=(i=null!=l?u(l,"adConfig"):l)?u(i,"adUnit"):i)?u(i,"a"):i},data:t,indent:"\t\t\t",helpers:e,partials:n,decorators:a.decorators}))?i:"")+'\t\t</div>\n\t\t<div class="'+s(r(null!=(i=null!=l?u(l,"classes"):l)?u(i,"adB"):i,l))+'">\n'+(null!=(i=a.invokePartial(u(n,"prbd-moola-position"),l,{name:"prbd-moola-position",hash:{upgradeProLink:!1,advertisingStitching:null!=l?u(l,"advertisingStitching"):l,upsellFallback:!1,adUnit:null!=(i=null!=(i=null!=l?u(l,"adConfig"):l)?u(i,"adUnit"):i)?u(i,"b"):i},data:t,indent:"\t\t\t",helpers:e,partials:n,decorators:a.decorators}))?i:"")+'\t\t</div>\n\t</div>\n\t<p class="upgrade-to-pro-cta"><a href="'+s("function"==typeof(o=null!=(o=u(e,"upgradeProLink")||(null!=l?u(l,"upgradeProLink"):l))?o:p)?o.call(d,{name:"upgradeProLink",hash:{},data:t,loc:{start:{line:10,column:40},end:{line:10,column:58}}}):o)+'">'+s((u(e,"intlMessage")||l&&u(l,"intlMessage")||p).call(d,{name:"intlMessage",hash:{intlName:"common.UPGRADE_PRO_HIDE_ADS"},data:t,loc:{start:{line:10,column:60},end:{line:10,column:114}}}))+"</a></p>\n</div>"},usePartial:!0,useData:!0}),n={};a.Array.each(["prbd-moola-position","prbd-moola-position"],(function(l){var e=a.Template.get("hermes/"+l);e&&(n[l]=e)})),a.Template.register("hermes/moola-search-view",(function(l,t){return(t=t||{}).partials=t.partials?a.merge(n,t.partials):n,e(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base","hermes-template-prbd-moola-position","hermes-template-prbd-moola-position"]});YUI.add("moola-search-view",(function(e,a){require("hermes-core/flog")(a);var t=new e.SubscriptionsHelper;e.namespace("Views")["moola-search-view"]=e.Base.create("moola-search-view",e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){this.params=e},buildContainer:function(){var a,i,o=e.config.flickr.moola.positions.search[0],r=this.appContext.viewportData.getWidth(),n=e.config.flickr.moola.ad_breakpoint_mobile_desktop;a={adUnit:{a:o[r<n?"ad_unit_mobile_leaderboard":"ad_unit_desktop_a"],b:o[r<n?"ad_unit_mobile":"ad_unit_desktop_b"]}},i={adA:r<n?"moola-search-mob-ad-a":"moola-search-desk-ad-a",adB:r<n?"moola-search-mob-ad-b":"moola-search-desk-ad-b",container:r<n?"moola-search-mob-container":"moola-search-desk-container"},this.adUnit=a.adUnit,this.adEventStitch=this.appContext.adManager.getHashedAdValue(this.appContext.adManager.getAdPositioning(this.get("container"))),this.setContainerWithTemplate("moola-search-view",{adConfig:a,classes:i,advertisingStitching:this.adEventStitch,upgradeProLink:t.getProLandingPageUrl(t.UTM_HIDE_ADS)})},activate:function(){return this.setDataLayerForView(),this.appContext.adManager.refreshAdUnit(),this},setDataLayerForView:function(){this.appContext.dataLayer.setDataLayerProp("page.onsiteSearchTerm",this.params.searchTerm)}})}),"@VERSION@",{requires:["flickr-view","hermes-template-moola-search-view","subscriptions-helper"],optionalRequires:["hermes-core"],langBundles:["common","feed"]});YUI.add("hermes-template-search-color-picker",(function(l,e){var n=l.Template.Handlebars.revive({1:function(l,e,n,a,o){var t=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t<p class="option-header tabbable" tabindex="0">'+l.escapeExpression((t(n,"intlMessage")||e&&t(e,"intlMessage")||l.hooks.helperMissing).call(null!=e?e:l.nullContext||{},{name:"intlMessage",hash:{intlName:"search.COLOR"},data:o,loc:{start:{line:2,column:48},end:{line:2,column:87}}}))+"</p>\n"},3:function(l,e,n,a,o){var t,r,c=null!=e?e:l.nullContext||{},i=l.hooks.helperMissing,s="function",u=l.escapeExpression,m=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return'\t\t<li class="color-swatch'+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useDarkCheckMark"):e,{name:"if",hash:{},fn:l.program(4,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:25},end:{line:6,column:67}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"useOutline"):e,{name:"if",hash:{},fn:l.program(6,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:67},end:{line:6,column:100}}}))?t:"")+(null!=(t=m(n,"if").call(c,null!=e?m(e,"selected"):e,{name:"if",hash:{},fn:l.program(8,o,0),inverse:l.noop,data:o,loc:{start:{line:6,column:100},end:{line:6,column:131}}}))?t:"")+'" style="background-color: #'+u(typeof(r=null!=(r=m(n,"color")||(null!=e?m(e,"color"):e))?r:i)===s?r.call(c,{name:"color",hash:{},data:o,loc:{start:{line:6,column:159},end:{line:6,column:168}}}):r)+'" data-color-code="'+u(typeof(r=null!=(r=m(n,"colorCode")||(null!=e?m(e,"colorCode"):e))?r:i)===s?r.call(c,{name:"colorCode",hash:{},data:o,loc:{start:{line:6,column:187},end:{line:6,column:200}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:222},end:{line:6,column:254}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||e&&m(e,"intlMessage")||i).call(c,{name:"intlMessage",hash:{intlName:null!=e?m(e,"intlKey"):e},data:o,loc:{start:{line:6,column:295},end:{line:6,column:327}}}))+'"></li>\n'},4:function(l,e,n,a,o){return" dark-check"},6:function(l,e,n,a,o){return" outline"},8:function(l,e,n,a,o){return" checked"},compiler:[8,">= 4.3.0"],main:function(l,e,n,a,o){var t,r=null!=e?e:l.nullContext||{},c=l.lookupProperty||function(l,e){if(Object.prototype.hasOwnProperty.call(l,e))return l[e]};return(null!=(t=c(n,"if").call(r,null!=e?c(e,"showTitle"):e,{name:"if",hash:{},fn:l.program(1,o,0),inverse:l.noop,data:o,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?t:"")+'<ul class="color-list">\n'+(null!=(t=c(n,"each").call(r,null!=e?c(e,"colors"):e,{name:"each",hash:{},fn:l.program(3,o,0),inverse:l.noop,data:o,loc:{start:{line:5,column:1},end:{line:7,column:10}}}))?t:"")+"</ul>\n"},useData:!0}),a={};l.Array.each([],(function(e){var n=l.Template.get("hermes/"+e);n&&(a[e]=n)})),l.Template.register("hermes/search-color-picker",(function(e,o){return(o=o||{}).partials=o.partials?l.merge(a,o.partials):a,n(e,o)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-color-picker-view",(function(e){var t=[{intlKey:"search.RED",color:"ff2000",colorCode:"0"},{intlKey:"search.DARK_ORANGE",color:"a24615",colorCode:"1"},{intlKey:"search.ORANGE",color:"ff7c00",colorCode:"2"},{intlKey:"search.PALE_PINK",color:"ff9f9c",colorCode:"b"},{intlKey:"search.LEMON_YELLOW",color:"fffa00",colorCode:"4",useDarkCheckMark:!0},{intlKey:"search.SCHOOL_BUS_YELLOW",color:"ffcf00",colorCode:"3",useDarkCheckMark:!0},{intlKey:"search.GREEN",color:"90e200",colorCode:"5"},{intlKey:"search.LIME_GREEN",color:"00ab00",colorCode:"6"},{intlKey:"search.CYAN",color:"00b2d4",colorCode:"7"},{intlKey:"search.BLUE",color:"0062c6",colorCode:"8"},{intlKey:"search.VIOLET",color:"8c20ba",colorCode:"9"},{intlKey:"search.PINK",color:"f52394",colorCode:"a"},{intlKey:"search.WHITE",color:"ffffff",colorCode:"c",useDarkCheckMark:!0,useOutline:!0},{intlKey:"search.GRAY",color:"7c7c7c",colorCode:"d"},{intlKey:"search.BLACK",color:"000000",colorCode:"e"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(r){var o,l=this;return this.searchUrl=r.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),o=this.searchUrl.getAPIParam(e.SearchHelper.API.colorCodes),this.selectedColors=o?o.split(","):[],this.colors=[],t.forEach((function(t){l.colors.push(e.merge(t,{selected:-1!==l.selectedColors.indexOf(t.colorCode)}))})),this.showTitle=r.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-color-picker",{showTitle:this.showTitle,colors:this.colors}),this.updateContainerDisabledState(),this},activate:function(){return this.registerEventHandler(this.get("container").delegate("click",this.handleColorSwatchClick.bind(this),".color-swatch")),this.registerEventHandler(this.get("container").delegate("key",this.handleColorSwatchClick.bind(this),"down:13",".color-swatch")),this},onParentViewEvent:function(e,t){if("search:blackandwhiteStyleSelected"===(t&&t.length&&t[0]))this.clearSelectedColors()},handleColorSwatchClick:function(e){var t=e.target.getData("color-code"),r=this.selectedColors.indexOf(t);if(e.halt(),-1===r){if(this.isContainerDisabled())return;this.selectedColors.push(t),e.target.addClass("checked"),this.updateContainerDisabledState(),this.fire("subviewViewEvent","search:colorSelected")}else this.selectedColors.splice(r,1),e.target.removeClass("checked"),this.updateContainerDisabledState();this.updateSearchUrl()},updateContainerDisabledState:function(){this.selectedColors.length>=5?this.get("container").addClass("disabled"):this.get("container").removeClass("disabled")},isContainerDisabled:function(){return!!this.get("container").hasClass("disabled")},updateSearchUrl:function(){this.searchUrl.clearColorCodes(),this.isDefaultValue()||this.searchUrl.setAPIParam(e.SearchHelper.API.colorCodes,this.selectedColors.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedColors&&this.selectedColors.length)},clearSelectedColors:function(){this.selectedColors=[],this.colors.forEach((function(e){e.selected=0})),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-color-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-style-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var s=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((s(n,"intlMessage")||l&&s(l,"intlMessage")||e.hooks.helperMissing).call(null!=l?l:e.nullContext||{},{name:"intlMessage",hash:{intlName:"search.STYLE_LABEL"},data:t,loc:{start:{line:2,column:48},end:{line:2,column:93}}}))+"</p>\n"},3:function(e,l,n,a,t){var s,r,o=null!=l?l:e.nullContext||{},i=e.hooks.helperMissing,c="function",u=e.escapeExpression,m=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<li class="style-button '+u(typeof(r=null!=(r=m(n,"cssClass")||(null!=l?m(l,"cssClass"):l))?r:i)===c?r.call(o,{name:"cssClass",hash:{},data:t,loc:{start:{line:6,column:26},end:{line:6,column:38}}}):r)+(null!=(s=m(n,"if").call(o,null!=l?m(l,"useDarkCheckMark"):l,{name:"if",hash:{},fn:e.program(4,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:38},end:{line:6,column:80}}}))?s:"")+(null!=(s=m(n,"if").call(o,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:e.program(6,t,0),inverse:e.noop,data:t,loc:{start:{line:6,column:80},end:{line:6,column:111}}}))?s:"")+'" data-style-value="'+u(typeof(r=null!=(r=m(n,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(o,{name:"value",hash:{},data:t,loc:{start:{line:6,column:131},end:{line:6,column:140}}}):r)+'" data-tooltip-title="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:162},end:{line:6,column:194}}}))+'" tabindex="0" role="button" aria-label="'+u((m(n,"intlMessage")||l&&m(l,"intlMessage")||i).call(o,{name:"intlMessage",hash:{intlName:null!=l?m(l,"intlKey"):l},data:t,loc:{start:{line:6,column:235},end:{line:6,column:267}}}))+'">\n\t\t\t<div class="style-image"></div>\n\t\t</li>\n'},4:function(e,l,n,a,t){return" dark-check"},6:function(e,l,n,a,t){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var s,r=null!=l?l:e.nullContext||{},o=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return(null!=(s=o(n,"if").call(r,null!=l?o(l,"showTitle"):l,{name:"if",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:1,column:0},end:{line:3,column:7}}}))?s:"")+'<ul class="style-list">\n'+(null!=(s=o(n,"each").call(r,null!=l?o(l,"styles"):l,{name:"each",hash:{},fn:e.program(3,t,0),inverse:e.noop,data:t,loc:{start:{line:5,column:1},end:{line:9,column:10}}}))?s:"")+"</ul>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-style-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("search-style-picker-view",(function(e){var t=[{intlKey:"search.BLACK_AND_WHITE",value:"blackandwhite",cssClass:"black-and-white"},{intlKey:"search.DEPTH_OF_FIELD",value:"depthoffield",cssClass:"depth-of-field"},{intlKey:"search.MINIMALIST",value:"minimalism",cssClass:"minimalist"},{intlKey:"search.PATTERNS",value:"pattern",cssClass:"patterns"}];e.namespace("Views")[this.name]=e.Base.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(s){var l,i=this;return this.searchUrl=s.searchUrl||new e.SearchUrl({},this.appContext,e.SearchUrl.searchTypes.PHOTOS),l=this.searchUrl.getAPIParam(e.SearchHelper.API.styles),this.selectedStyles=l?l.split(","):[],this.styles=[],t.forEach((function(t){i.styles.push(e.merge(t,{selected:-1!==i.selectedStyles.indexOf(t.value)}))})),this.showTitle=s.showTitle,this},loadState:function(){return e.Promise.resolve()},buildContainer:function(){return this.setContainerWithTemplate("search-style-picker",{showTitle:this.showTitle,styles:this.styles}),this},activate:function(){var e=this.get("container");return this.registerEventHandler(e.delegate("click",this.handleFilterClick.bind(this),".style-button")),this.registerEventHandler(e.delegate("key",this.handleFilterClick.bind(this),"down:13",".style-button")),this},onParentViewEvent:function(e,t){if("search:colorSelected"===(t&&t.length&&t[0]))this.clearSelectedStyle("blackandwhite")},handleFilterClick:function(e){var t=e.target.ancestor(".style-button",!0),s=t.getData("style-value"),l=this.selectedStyles.indexOf(s),i=this.styles.find(((e,t)=>e.value===s));e.halt(),-1===l?(this.selectedStyles.push(s),t.addClass("checked"),i&&(i.selected=!0),"blackandwhite"===s&&this.fire("subviewViewEvent","search:blackandwhiteStyleSelected")):(this.selectedStyles.splice(l,1),t.removeClass("checked"),i&&(i.selected=!1)),this.updateSearchUrl()},updateSearchUrl:function(){this.isDefaultValue()?this.searchUrl.removeAPIParam(e.SearchHelper.API.styles):this.searchUrl.setAPIParam(e.SearchHelper.API.styles,this.selectedStyles.join(",")),this.fire("subviewViewEvent","search:urlUpdate",this.searchUrl)},isDefaultValue:function(){return!(this.selectedStyles&&this.selectedStyles.length)},clearSelectedStyle:function(e){var t=this.selectedStyles.indexOf(e);-1!==t&&(this.selectedStyles.splice(t,1),this.styles.some((function(t){if(t.value===e)return t.selected=0,!0}))),this.buildContainer(),this.updateSearchUrl()}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-search-style-picker","search-helper","search-url"],langBundles:["search"]});YUI.add("hermes-template-search-orientation-picker",(function(e,l){var n=e.Template.Handlebars.revive({1:function(e,l,n,a,t){var o,s,i=null!=l?l:e.nullContext||{},r=e.hooks.helperMissing,c="function",u=e.escapeExpression,p=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'\t\t<div class="orientation-button '+u(typeof(s=null!=(s=p(n,"cssClass")||(null!=l?p(l,"cssClass"):l))?s:r)===c?s.call(i,{name:"cssClass",hash:{},data:t,loc:{start:{line:4,column:33},end:{line:4,column:45}}}):s)+(null!=(o=p(n,"if").call(i,null!=l?p(l,"selected"):l,{name:"if",hash:{},fn:e.program(2,t,0),inverse:e.noop,data:t,loc:{start:{line:4,column:45},end:{line:4,column:76}}}))?o:"")+' tabbable" data-orientation-value="'+u(typeof(s=null!=(s=p(n,"value")||(null!=l?p(l,"value"):l))?s:r)===c?s.call(i,{name:"value",hash:{},data:t,loc:{start:{line:4,column:111},end:{line:4,column:120}}}):s)+'" data-tooltip-title="'+u((p(n,"intlMessage")||l&&p(l,"intlMessage")||r).call(i,{name:"intlMessage",hash:{intlName:null!=l?p(l,"intlKey"):l},data:t,loc:{start:{line:4,column:142},end:{line:4,column:174}}}))+'" data-tooltip-prefer-bottom="true" tabindex="0" aria-label="'+u(typeof(s=null!=(s=p(n,"value")||(null!=l?p(l,"value"):l))?s:r)===c?s.call(i,{name:"value",hash:{},data:t,loc:{start:{line:4,column:235},end:{line:4,column:244}}}):s)+'"></div>\n'},2:function(e,l,n,a,t){return" checked"},compiler:[8,">= 4.3.0"],main:function(e,l,n,a,t){var o,s=null!=l?l:e.nullContext||{},i=e.lookupProperty||function(e,l){if(Object.prototype.hasOwnProperty.call(e,l))return e[l]};return'<p class="option-header tabbable" tabindex="0">'+e.escapeExpression((i(n,"intlMessage")||l&&i(l,"intlMessage")||e.hooks.helperMissing).call(s,{name:"intlMessage",hash:{intlName:"search.ORIENTATION"},data:t,loc:{start:{line:1,column:47},end:{line:1,column:92}}}))+'</p>\n<div class="orientation-list">\n'+(null!=(o=i(n,"each").call(s,null!=l?i(l,"orientations"):l,{name:"each",hash:{},fn:e.program(1,t,0),inverse:e.noop,data:t,loc:{start:{line:3,column:1},end:{line:5,column:10}}}))?o:"")+"</div>\n"},useData:!0}),a={};e.Array.each([],(function(l){var n=e.Template.get("hermes/"+l);n&&(a[l]=n)})),e.Template.register("hermes/search-orientation-picker",(function(l,t){return(t=t||{}).partials=t.partials?e.merge(a,t.partials):a,n(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});