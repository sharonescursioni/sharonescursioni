YUI.add("photo-selector-view",(function(t,e){var o,i=require("hermes-core/flog")(e),s=150;o={horizontal:20,vertical:20},t.FlickrView.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").getHTML()&&this.setContainerWithTemplate("flickr-balls"),this.photoListView,this.searchPhotoListViews=[],this.publicOnlyGroups=t.publicOnlyGroups,this.publicOnlyPhotos=t.publicOnlyPhotos,this.safeOnlyPhotos=t.safeOnlyPhotos||!1,this.enableMultiSelect=t.enableMultiSelect||!1,this.multiSelectLimit=void 0===t.multiSelectLimit?1:t.multiSelectLimit,this.preSelectedPhotos=t.preSelectedPhotos||[],this.clearRegistriesOnDestroy=t.clearRegistriesOnDestroy||!1,this.selectedModels=[],t.enableVideos&&this.set("itemFilterFunction",!1),this.isUploading=!1,this},loadState:function(){var e=this.appContext.getViewer().nsid,o={};return this.safeOnlyPhotos&&(e+="-safe",o.safeSearch="true"),this.publicOnlyPhotos&&(e+="-public",o.viewAs="public"),this.appContext.getModelRegistry("profile-selected-photos-models").then(function(i){i.removeAll();var s={selectionModel:this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid),photostreamModel:this.appContext.getModel("photostream-models",e,o),setModelRegistry:this.appContext.getModelRegistry("set-models"),setsModel:this.appContext.getModel("sets-models",this.appContext.getViewer().nsid,{page:1,perPage:25}),profileModel:this.appContext.getModel("person-profile-models",this.appContext.getViewer().nsid)};return new t.FlickrPromise(s).then(this.onLoadStateResolved.bind(this))}.bind(this))},onLoadStateResolved:function(e){if(this.set("selectionModel",e.selectionModel),this.set("photostreamModel",e.photostreamModel),this.set("setsModel",e.setsModel),this.set("setModelRegistry",e.setModelRegistry),this.set("profileModel",e.profileModel),this.preSelectedPhotos&&this.preSelectedPhotos.length>0&&this.get("selectionModel").setValue("photos",this.preSelectedPhotos?this.preSelectedPhotos:[]),0===this.get("photostreamModel").getValue("totalItems")?this.set("photostreamEmpty",!0):this.set("photostreamEmpty",!1),this.get("groupId"))return this.appContext.getModel("group-pool-models",this.get("groupId")).then(function(t){this.set("groupModel",t)}.bind(this),(function(t){i.error("error loading group model",{err:t})}));this.canUpload=this.get("hasUploadCapabilities")&&!t.UserLimitsHelper.hasReachedUploadLimit(this.get("profileModel"),this.appContext)},moveElementToFirstInArray:function(t,e,o){var i;return t.forEach((function(t,s){t[o]===e&&(i=s)})),t.unshift(t.splice(i,1)[0]),t},buildContainer:function(){return this.setContainerWithTemplate("photo-selector",{hasUploadCapabilities:this.get("hasUploadCapabilities"),canUpload:this.canUpload,searchable:this.get("searchable"),publicOnlyPhotos:this.get("publicOnlyPhotos"),photostreamEmpty:this.get("photostreamEmpty"),hasGroupCapabilities:this.get("groupId")}),this},loadPhotoList:function(e,a){var r,l=this,n=this.get("container"),h=n.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a||(a=!1),r={modelParams:e,fetchParams:e.fetchParams,parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,parentContainer:h,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),galleryId:this.get("galleryId"),type:this.get("defaultSelected").type},this.get("itemFilterFunction")&&(r.itemFilterFunction=this.get("itemFilterFunction")),r.layout={targetRowHeight:s,containerWidth:r.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:h.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=r,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:r,isActiveViewAgnostic:!0,container:n.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=n.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),r=n.one(".loader");h.getDOMNode().scrollTop=0,l.photoListView=e,r&&r.addClass("loaded"),s.hasChildNodes()||(o=a?t.Node.create('<p class="no-results">'+l.intlMessage({intlName:"search.NO_MATCHES_FOR_QUERY_TERM_YOUR"})+"</p>"):l.publicOnlyPhotos?t.Node.create('<p class="no-results">'+l.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"})+"</p>"):t.Node.create('<p class="no-results">'+l.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),l.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSelectionPhotoList:function(){var e,a=this,r=this.get("container"),l=r.one(".photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),(e={parentName:this.name,hasMultiSelect:this.enableMultiSelect,multiSelectLimit:this.multiSelectLimit,paginateOnScroll:!0,initialItems:this.get("selectionModel").getValue("photos").getList(),parentContainer:l,relayoutOnResize:!0,interactionViewName:"photo-selector-selection-interaction-view"}).layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!0,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:l.get("offsetHeight")},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,nsid:this.appContext.getViewer().nsid,container:r.one(".photo-selector-photos-container")}).then((function(e){return e.initialize().then((function(e){var o,i=r.one(".photo-selector-photos-container"),s=i.one(".photo-list-view"),n=r.one(".loader");i.addClass("photo-selector-selection-photolist"),l.getDOMNode().scrollTop=0,a.photoListView=e,n&&n.addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+a.intlMessage({intlName:"profile.NO_PHOTOS_SELECTED"})+"</p>"),s.empty(),i.prepend(o))}))}),(function(t){i.error("Error getting view",{err:t})}))},loadGroupPhotoList:function(e){var a,r=this,l=this.get("container"),n=l.one(".group-photo-selector-photos-wrapper");this.photoListView&&this.photoListView.destroy(),a={modelParams:e,parentName:this.name,paginateOnScroll:!0,parentContainer:n,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName")},this.get("itemFilterFunction")&&(a.itemFilterFunction=this.get("itemFilterFunction")),a.layout={targetRowHeight:s,containerWidth:a.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:n.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=a,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:a,isActiveViewAgnostic:!0,container:n}).then((function(e){return e.initialize().then((function(e){var o,i=l.one(".group-photo-selector-photos-container"),s=i.one(".photo-list-view");n.getDOMNode().scrollTop=0,r.photoListView=e,l.one(".loader").addClass("loaded"),s.hasChildNodes()||(o=t.Node.create('<p class="no-results">'+r.intlMessage({intlName:"groups.GROUP_POOL_CONTAINS_NO_PUBLIC_PHOTOS"})+"</p>"),s.empty(),i.prepend(o)),r.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSetsPhotoList:function(t){var e,s=this,a=this.get("container");this.photoListView&&this.photoListView.destroy(),(e={modelParams:t,parentName:this.name,paginateOnScroll:!0,parentContainer:a.one(".photo-selector-photos-wrapper"),relayoutOnResize:!0,interactionViewName:this.get("setsInteractionViewName"),engagementModelName:"set-models",viewBeaconRestrictedAttribute:"primaryNeedsInterstitial"}).layout={targetRowHeight:200,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:20,bottom:10,left:20},itemSpacing:o,forceAspectRatio:1,alwaysDisplayOrphans:!1,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:a.one(".photo-selector-photos-wrapper").get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(this.get("photoListViewName"),{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:a.one(".photo-selector-photos-container")}).then((function(t){return t.initialize().then((function(t){var e=a.one(".loader");a.one(".photo-selector-photos-container .photo-list-view");a.one(".photo-selector-photos-wrapper").getDOMNode().scrollTop=0,s.photoListView=t,e&&a.one(".loader").addClass("loaded"),s.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},loadSearchPhotoList:function(t){var e,a=this,r=this.get("container"),l=t.photoListContainerSelector?r.one(t.photoListContainerSelector):r.one(".photo-selector-photos-container"),n=t.parentContainerSelector?r.one(t.parentContainerSelector):r.one(".photo-selector-photos-wrapper"),h=t.maxNumRows?this.get("limitedRowsPhotoListViewName"):this.get("photoListViewName");this.searchPhotoListViews&&this.searchPhotoListViews[t.listId]&&this.searchPhotoListViews[t.listId].destroy(),e={modelParams:t.modelParams,parentName:this.name,paginateOnScroll:!0,parentContainer:n,relayoutOnResize:!0,interactionViewName:this.get("interactionViewName"),engagementModelName:"photo-lite-models"},this.get("itemFilterFunction")&&(e.itemFilterFunction=this.get("itemFilterFunction")),e.layout={targetRowHeight:s,containerWidth:e.parentContainer.get("offsetWidth"),containerPadding:{top:10,right:0,bottom:10,left:0},itemSpacing:o,forceAspectRatio:1,maxNumRows:t.maxNumRows?t.maxNumRows:Number.POSITIVE_INFINITY,alwaysDisplayOrphans:!!t.alwaysDisplayOrphans&&t.alwaysDisplayOrphans,awakeBoundsToViewportSizeRatio:5,viewportContainerNodeHeight:n.get("offsetHeight")},this.appContext.params.primaryPhotoListConfig=e,this.appContext.getView(h,{appContext:this.appContext,publicOnlyPhotos:this.publicOnlyPhotos,primaryPhotoListConfig:e,isActiveViewAgnostic:!0,container:l,searchUrl:t.searchUrl,listId:t.listId}).then((function(e){return e.initialize().then((function(e){a.registerEventHandler(e.on("subviewViewEvent",a.handleSubviewEvent,a)),r.one(".photo-selector-search-lists-wrapper").getDOMNode().scrollTop=0,t.parentContainerSelector&&(r.one(t.parentContainerSelector).getDOMNode().scrollTop=0),a.searchPhotoListViews[t.listId]=e,r.one(".loader").addClass("loaded"),a.addPhotoToSelection(null)}))}),(function(t){i.error("Error getting view",{err:t})}))},activate:function(){var e,o=this.get("container"),i=this.get("defaultSelected");return this.registerEventHandler(o.on("click",this.handleClick,this)),this.canUpload&&this.registerEventHandler(o.one(".file-select").on("change",this.handleFileSelect,this)),this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleSubviewEvent,this)),i?"group"===i.type?(e={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId")+"-public",collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(e.fetchParams={privacyFilter:1},e.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(e),this.toggleTitleBar(i.title,"group")):"gallery"===i.type?(e={registryName:"gallery-info-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoList"},this.loadPhotoList(e)):"galleryFaves"===i.type?(e={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(e)):(e={registryName:"set-models",modelIdOrAttributes:i.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.filter=1),this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.moderationFilter=1),this.loadPhotoList(e),this.toggleTitleBar(i.title,"set")):0===this.get("photostreamModel").getValue("totalItems")?this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"},"empty",!1)):(e={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(e.modelIdOrAttributes+="-safe",e.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(e.modelIdOrAttributes+="-public",e.fetchParams.viewAs="public"),this.loadPhotoList(e,!1)),this},toggleUploader:function(){this.get("hasUploadCapabilities")&&(this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-upload").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"))},toggleSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").removeClass("is-hiding")},toggleSearchListsSelector:function(){this.get("hasUploadCapabilities")&&this.get("container").one(".photo-selector-upload").addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("container").one(".photo-selector-photos-container").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").removeClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").addClass("is-hiding")},toggleGroupSelector:function(){var t=this.get("container").one(".photo-selector-upload");t&&t.addClass("is-hiding"),this.get("container").one(".photo-selector-photos-wrapper").addClass("is-hiding"),this.photoListView&&this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").empty().append(this.templates("flickr-balls")({})),this.get("container").one(".photo-selector-search-lists-wrapper").addClass("is-hiding"),this.get("groupId")&&this.get("container").one(".group-photo-selector-photos-wrapper").removeClass("is-hiding")},toggleTitleBar:function(e,o,i){var s=this.get("container"),a=s.one(".photo-selector-title-bar"),r=a.one(".back-to-list"),l="";void 0===i&&(i=!0),"search"===o&&e&&(e='"'+e+'"'),"set"===o?l=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_ALBUM_LIST"}):"search"===o&&(l=this.intlMessage({intlName:"common.PHOTO_SELECTOR_BACK_TO_SEARCH_LIST"})),i?r.removeClass("hidden"):r.addClass("hidden"),r.one(".back-to-list-text").set("text",l),a.one(".title").set("text",t.Handlebars.helpers.truncate(e,120)),a.removeClass("hidden"),s.one(".photo-selector-photos-wrapper").addClass("showing-title"),s.one(".photo-selector-search-lists-wrapper").addClass("showing-title"),this.get("groupId")&&s.one(".group-photo-selector-photos-wrapper").addClass("showing-title")},hideTitleBar:function(){var t=this.get("container");t.one(".photo-selector-title-bar").addClass("hidden"),t.one(".photo-selector-photos-wrapper").removeClass("showing-title"),this.get("groupId")&&t.one(".group-photo-selector-photos-wrapper").removeClass("showing-title")},onParentViewEvent:function(e,o){var i,s,a,r=o[1],l={},n=this.get("searchable"),h=this.get("container").one(".no-results");if("navigation"===o[0])if("upload"===(i=r.target._node.dataset.value))this.get("hasUploadCapabilities")&&(this.toggleUploader(),this.hideTitleBar()),this.get("fileDragDrop")?this.get("fileDragDrop").reset():this.canUpload&&(this.set("fileDragDrop",new t.HtmlFileDragDrop({dropZone:".photo-selector-upload > .drop-zone"})),this.get("fileDragDrop").on("drop",this.handleFileDrop,this));else{if(this.get("hasUploadCapabilities")&&this.toggleSelector(),"group"===i)s={registryName:"group-pool-models",modelIdOrAttributes:this.get("groupId"),collectionAttributeName:"photoPageList"},this.publicOnlyGroups&&(s.fetchParams={privacyFilter:1},s.modelIdOrAttributes+="-public"),this.toggleGroupSelector(),this.loadGroupPhotoList(s);else if("photostream"===i){if(0===this.get("photostreamModel").getValue("totalItems"))return h&&h.remove(),void(this.get("hasUploadCapabilities")?(this.toggleUploader(),this.hideTitleBar()):this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_EMPTY_PUBLIC_PHOTOS"},"empty",!1)));s={registryName:"photostream-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"photoPageList",fetchParams:{}},this.safeOnlyPhotos&&(s.modelIdOrAttributes+="-safe",s.fetchParams.safeSearch="true"),this.publicOnlyPhotos&&(s.modelIdOrAttributes+="-public",s.fetchParams.viewAs="public"),this.loadPhotoList(s)}else if("sets"===i){if(0===this.get("setsModel").getValue("totalItems")){var p=this.get("container").one(".photo-list-view");return h&&h.remove(),this.toggleTitleBar(this.intlMessage({intlName:"common.PHOTO_SELECTOR_NO_ALBUMS"},"empty",!1)),void p.empty()}s={registryName:"sets-models",modelIdOrAttributes:this.appContext.getViewer().nsid,collectionAttributeName:"albumsList"},this.loadSetsPhotoList(s)}else"gallery"===i?(s={registryName:"gallery-info-models",modelIdOrAttributes:this.get("galleryId"),collectionAttributeName:"photoList"},this.loadPhotoList(s)):"galleryFaves"===i?(s={registryName:"gallery-faves-models",modelIdOrAttributes:this.get("defaultSelected").id,collectionAttributeName:"photoList",fetchParams:{galleryId:this.get("galleryId")}},this.loadPhotoList(s)):this.loadSelectionPhotoList();this.hideTitleBar()}else"search"===o[0]&&(a=new t.SearchUrl(r.apiParams,this.appContext),this.toggleSearchListsSelector(),n.yours&&(this.searchUrlYourPhotos=new t.SearchUrl(r.apiParams,this.appContext),this.searchUrlYourPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),n.contacts||n.everyone?(l.listId="yours",l.photoListContainerSelector=".photo-selector-search-list-yours .photo-selector-search-list-container",l.parentContainerSelector=".photo-selector-search-list-yours",l.maxNumRows=1,l.alwaysDisplayOrphans=!0,l.searchUrl=this.searchUrlYourPhotos,l.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams()}},this.publicOnlyPhotos&&(s.fetchParams.privacyFilter=1),this.loadSearchPhotoList(l)):(this.toggleSelector(),s={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlYourPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlYourPhotos.getAPIParams(),additionalExtras:["o_dims"]}},this.publicOnlyPhotos&&(s.fetchParams.privacyFilter=1),this.loadPhotoList(s,!0))),n.contacts&&(this.searchUrlContactsPhotos=new t.SearchUrl(r.apiParams,this.appContext),this.searchUrlContactsPhotos.setAPIParam("user_id",this.appContext.getViewer().nsid),this.searchUrlContactsPhotos.setAPIParam("contacts","all"),l.listId="contacts",l.photoListContainerSelector=".photo-selector-search-list-contacts .photo-selector-search-list-container",l.parentContainerSelector=".photo-selector-search-list-contacts",l.maxNumRows=1,l.alwaysDisplayOrphans=!0,l.searchUrl=this.searchUrlContactsPhotos,l.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:this.searchUrlContactsPhotos.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlContactsPhotos.getAPIParams()}},this.loadSearchPhotoList(l)),n.everyone&&(this.searchUrlEveryonePhotos=new t.SearchUrl(r.apiParams,this.appContext),l.listId="everyone",l.photoListContainerSelector=".photo-selector-search-list-everyone .photo-selector-search-list-container",l.parentContainerSelector=".photo-selector-search-list-everyone",l.maxNumRows=1,l.alwaysDisplayOrphans=!0,l.searchUrl=this.searchUrlEveryonePhotos,l.modelParams={registryName:"search-photos-lite-models",modelIdOrAttributes:r.id,collectionAttributeName:"photos",fetchParams:{apiParams:this.searchUrlEveryonePhotos.getAPIParams()}},this.loadSearchPhotoList(l)),this.toggleTitleBar(a.getAPIParams().text,"search",!1))},handleSubviewEvent:function(e){var o,i,s;return"selectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.enableMultiSelect&&this.hasReachMultiSelectLimit()||this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))):"unselectPhotoFromPhotoList"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.id)},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel)}.bind(this))):"selection:remove"===e.eventName?(o={photoModel:this.appContext.getModel("photo-models",e.model.getValue("id"))},new t.FlickrPromise(o).then(function(t){t.photoModel.isOwner&&this.set("photoSource",this.get("photoSourceOwnImage")),this.removePhotoFromSelection(t.photoModel.id,t.photoModel,!0)}.bind(this))):void("selectSetFromPhotoList"===e.eventName?(i={registryName:"set-models",modelIdOrAttributes:e.id,collectionAttributeName:"photoPageList",fetchParams:{}},this.publicOnlyPhotos&&(i.modelIdOrAttributes+="-public",i.fetchParams.filter=1),this.safeOnlyPhotos&&(i.modelIdOrAttributes+="-safe",i.fetchParams.moderationFilter=1),this.loadPhotoList(i,!1),this.toggleTitleBar(e.title,"set")):e.details&&"viewEntireSearchList"===e.details[0]&&(i={registryName:"search-photos-lite-models",modelIdOrAttributes:e.details[1].searchUrl.getId(),collectionAttributeName:"photos",fetchParams:{apiParams:e.details[1].searchUrl.getAPIParams()}},this.publicOnlyPhotos&&(i.fetchParams.privacyFilter=1),this.toggleSelector(),this.loadPhotoList(i),s="search.YOUR_PHOTOS","contacts"===e.details[1].list?s="search.FROM_YOUR_CONTACTS":"everyone"===e.details[1].list&&(s="search.EVERYONES_PHOTOS"),s=this.intlMessage({intlName:s}),this.toggleTitleBar(s+": "+e.details[1].searchUrl.getAPIParams().text,"search")))},handleClick:function(t){var e=t.target;this.isUploading||(e.ancestor(".back-to-list",!0)?this.fire("subviewViewEvent","backToList"):e.ancestor(".simulate-file-select",!0)&&(t.halt(),this.get("container").one(".file-select").set("value",""),this.get("container").one(".file-select").getDOMNode().click()))},handleSelectPhoto:function(e){var o;if(o={photoModel:this.appContext.getModel("photo-models",e.getData("photo-id"))},!e.hasClass("invalid"))return this.set("photoSource",this.get("photoSourceOwnImage")),new t.FlickrPromise(o).then(function(t){this.addPhotoToSelection(t.photoModel.id,t.photoModel)}.bind(this))},hasReachMultiSelectLimit:function(){return this.get("selectionModel").getValue("photos").size()===this.multiSelectLimit},addPhotoToSelection:function(e,o){if(null===e)this.set("selected",null),t.fire("photoSelector:unselected");else if(e&&this.enableMultiSelect){var i=this.get("selectionModel").getValue("photos");this.hasReachMultiSelectLimit()||i.find(o)||(i.push(o),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}),this.updateSelectCountText(i.size()))}else e&&(this.set("selected",e),t.fire("photoSelector:selected",{hasWarning:!1,photoId:e}))},updateSelectCountText:function(e){var o=this.multiSelectLimit-e;t.fire("photoSelector:updateCount",{count:o})},removePhotoFromSelection:function(e,o,i){var s=this.get("selectionModel").getValue("photos");s.find(o)&&(s.removeFromList(e)&&(t.fire("photoSelector:unselected",{hasWarning:!1,photoId:e,wasLastPhotoSelected:0===s.size()}),this.updateSelectCountText(s.size()),i&&this.loadSelectionPhotoList()))},handlePhotoSetSelector:function(t){var e;this.get("hasUploadCapabilities")&&this.toggleSelector(),e={registryName:"set-models",modelIdOrAttributes:this.publicOnlyPhotos?t+"-public":t,collectionAttributeName:"photoPageList"},this.publicOnlyPhotos&&(e.fetchParams={filter:1}),this.loadPhotoList(e)},handlePhotoUploaded:function(t){this.appContext.getModelRegistry("photostream-models").then(function(e){e.attributeSearch({normalizedId:this.appContext.getViewer().nsid},!0).forEach((function(t){e.remove(t)})),this.addPhotoToSelection(t.id,t),this.fire("actionClick",t),this.resetUploader()}.bind(this),function(t){this.appContext.err(t)}.bind(this))},handleFileSelect:function(t){var e;(e=t.target.getDOMNode().files[0])&&e.name&&this.uploadFile(e)},pollTicket:function(e){if(this.uploadTimer){if(t.moment().diff(this.uploadTimer,"seconds")>this.get("maxUploadTimeAllowed"))return this.showUploadError("GENERIC")}else this.uploadTimer=t.moment();this.appContext.callAPI("flickr.photos.upload.checkTickets",{tickets:e}).then(function(t){var o;t&&t.stat&&("ok"!==t.stat&&this.showUploadError("GENERIC"),t.uploader&&t.uploader.ticket instanceof Array&&(o=t.uploader.ticket[0])&&o.id===e&&(1===o.complete?this.appContext.getModel("photo-models",o.photoid).then(this.handlePhotoUploaded.bind(this),(function(t){this.showUploadError("GENERIC")})):2===o.complete?this.showUploadError("FILE_TYPE"):setTimeout(function(){this.pollTicket(e)}.bind(this),1e3)))}.bind(this),function(t){this.showUploadError("GENERIC")}.bind(this))},resetUploader:function(){this.clearUploadError(),this.get("container").one(".drop-zone").removeClass("uploading"),this.get("container").removeClass("uploading"),this.isUploading=!1,this.uploadTimer=void 0},uploadFile:function(e){var o,s,a,r=new FormData,l=t.config.flickr.api.hostname_client_upload;this.clearUploadError(),this.get("container").one(".drop-zone").addClass("uploading"),this.get("container").addClass("uploading"),this.isUploading=!0,r.append("api_key",t.SiteKey.getKey()),r.append("csrf",t.config.flickr.csrf.token),r.append("photo",e,e.name),r.append("async","1"),r.append("is_public","0"),r.append("is_friend","0"),r.append("is_family","0"),r.append("content_type","1"),(o=this._imgFileXhr=new XMLHttpRequest).open("POST",l,!0),o.withCredentials=!0,s=function(t){var e="object"==typeof t?t.target.statusText:t+"";i.error("Error during upload",{statusText:e}),this.resetUploader(),this.showUploadError("GENERIC")},a=function(e){var o,i,a,r;try{i=(r=t.one(e.currentTarget.responseXML)).one("rsp").getAttribute("stat")}catch(t){i="",o=""}return"ok"!==i?s((i||"empty")+": "+(o||"no message")):(a=r.one("ticketid").get("text"),this.pollTicket(a))},o.addEventListener("load",a.bind(this)),o.addEventListener("error",s.bind(this)),o.send(r)},clearUploadError:function(){this.get("container").one(".upload-error").setHTML("")},showUploadError:function(t){this.resetUploader(),this.get("container").one(".upload-error").setHTML(this.intlMessage({intlName:this.get("errorMessages")[t]})),this.get("fileDragDrop").showError()},handleFileDrop:function(t){this.isUploading||(t instanceof Error?this.showUploadError(t.message):this.uploadFile(t))},destructor:function(){this.photoListView&&this.photoListView.destroy()}},{ATTRS:{maxUploadTimeAllowed:{readOnly:!0,value:20},errorMessages:{readOnly:!0,value:{GENERIC:"common.PHOTO_SELECTOR_ERROR_MESSAGE_GENERIC",FILE_TYPE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_TYPE",FILE_SIZE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_SIZE",FILE_COUNT:"common.PHOTO_SELECTOR_ERROR_MESSAGE_FILE_COUNT",LOW_QUALITY:"common.PHOTO_SELECTOR_ERROR_MESSAGE_LOW_QUALITY",COLOR_SPACE:"common.PHOTO_SELECTOR_ERROR_MESSAGE_COLOR_SPACE"}},photoSourceOwnImage:{readOnly:!0,value:1},hasUploadCapabilities:{value:!0},photoListViewName:{value:"photo-selector-photolist-view"},limitedRowsPhotoListViewName:{value:"photo-selector-limited-rows-photolist-view"},searchable:{value:{yours:!0,contacts:!0,everyone:!0}},interactionViewName:{value:"photo-selector-photolist-interaction-view"},setsInteractionViewName:{value:"photo-selector-sets-photolist-interaction-view"},itemFilterFunction:{value:function(t){return!t.getValue("isVideo")}},defaultSelected:{value:!1},selected:{},groupId:{},galleryId:{}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","flickr-api","html-file-dragdrop","hermes-template-photo-selector","photo-selector-photolist-view","photo-selector-limited-rows-photolist-view","photo-selector-photolist-interaction-view","photo-selector-sets-photolist-interaction-view","user-limits-helper","site-key","moment"],optionalRequires:["hermes-core"],optional:["search-photos-lite-models"],langBundles:["common","wallart","search","groups","profile","upload-blocking"]});YUI.add("hermes-lang-wallart_it-it",(function(a,e){a.Intl.add("hermes/wallart","it-IT",{WALL_ART:[{type:0,value:"Wall Art"}],YOU_CANCELLED_THIS_ITEM_ON_DATE:[{type:0,value:"Hai cancellato questo articolo in data "},{type:3,value:"date",style:"monthYear"}],YOU_ORDERED_THIS_ITEM_ON_DATE:[{type:0,value:"Hai ordinato questo articolo in data "},{type:3,value:"date",style:"monthYear"}],RETURN_TO_YOUR_ORDER_HISTORY:[{type:0,value:"Ritorna alla cronologia degli ordini"}],SELECT_A_PHOTO:[{type:0,value:"Seleziona una foto"}],SELECT_PRODUCT:[{type:0,value:"Seleziona prodotto"}],PHOTO_MOUNT:[{type:0,value:"Stampa su pannello"}],CANVAS:[{type:0,value:"Tela"}],CANVAS_WRAP:[{type:0,value:"Stampa su tela"}],PREMIUM_LUSTRE:[{type:0,value:"Perlata Premium "}],GLOSSY:[{type:0,value:"Patinata"}],MATTE:[{type:0,value:"Opaca"}],SIZE:[{type:0,value:"Dimensione"}],CHECKOUT:[{type:0,value:"Completa la transazione"}],REORDER:[{type:0,value:"Riordina"}],TOTAL:[{type:0,value:"Totale"}],UPLOAD:[{type:0,value:"Carica"}],CURATED_COLLECTIONS:[{type:0,value:"Raccolte selezionate"}],CREATIVE_COMMONS:[{type:0,value:"Creative Commons"}],NASA:[{type:0,value:"NASA"}],ABSTRACT:[{type:0,value:"Astratto"}],ANIMALS:[{type:0,value:"Animali"}],PATTERNS:[{type:0,value:"Motivi"}],FOOD:[{type:0,value:"Cucina"}],LANDSCAPES:[{type:0,value:"Panorami"}],TRAVEL:[{type:0,value:"Viaggi"}],MY_ALBUMS:[{type:0,value:"I miei album"}],PRODUCT_DROPUP_CANVAS:[{type:0,value:'Tela di qualità artistica avvolta su un telaio in legno da 1,25"'}],PRODUCT_DROPUP_MOUNTED:[{type:0,value:'Carta da archivio fotografico con bordo effetto legno da 1"'}],MATERIAL_DROPUP_LUSTRE:[{type:0,value:"Professional Crystal Archive - Perlata Premium "}],MATERIAL_DROPUP_GLOSSY:[{type:0,value:"Professional Crystal Archive - Patinata"}],MATERIAL_DROPUP_MATTE:[{type:0,value:"Professional Crystal Archive - Opaca"}],SIZES_MODAL_SIZES_NOT_AVAILABLE:[{type:0,value:"Alcune dimensioni non sono disponibili a causa della risoluzione della foto. Per saperne di più."}],MOUNTED_SAFE_AREA:[{type:0,value:"L’area al di fuori della linea continua non verrà stampata. <br>L’area all’interno della linea verrà stampata."}],CANVAS_SAFE_AREA:[{type:0,value:"L’area al di fuori della linea tratteggiata verrà stampata sui bordi. <br>L’area all’interno della linea verrà stampata sulla superficie frontale."}],SAVING:[{type:0,value:"Salvataggio in corso..."}],SAVED:[{type:0,value:"Tutte le modifiche salvate"}],WITH_CODE:[{type:0,value:"con il codice:"}],FREE_SHIPPING_WITH_CODE:[{type:0,value:"Spedizione gratuita con il codice:"}],PRODUCT_DESCRIPTION_CANVAS_PART_1_8X10:[{type:0,value:'Stampa su tela da 8" x 10"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_10X8:[{type:0,value:'Stampa su tela da 10" x 8"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_12X12:[{type:0,value:'Stampa su tela da 12" x 12"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_11X14:[{type:0,value:'Stampa su tela da 11" x 14"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_14X11:[{type:0,value:'Stampa su tela da 14" x 11"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_16X20:[{type:0,value:'Stampa su tela da 16" x 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X16:[{type:0,value:'Stampa su tela da 20" x 16"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X24:[{type:0,value:'Stampa su tela da 20" x 24"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_24X20:[{type:0,value:'Stampa su tela da 24" x 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_20X30:[{type:0,value:'Stampa su tela da 20" x 30"'}],PRODUCT_DESCRIPTION_CANVAS_PART_1_30X20:[{type:0,value:'Stampa su tela da 30" x 20"'}],PRODUCT_DESCRIPTION_CANVAS_PART_2:[{type:0,value:'Cunei per tendere la tela da 1,25"<br>Telaio resistente agli urti<br>Accessori per il montaggio inclusi'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_8X10:[{type:0,value:'Stampa su pannello da 8" x 10"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_10X8:[{type:0,value:'Stampa su pannello da 10" x 8"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_12X12:[{type:0,value:'Stampa su pannello da 12" x 12"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_11X14:[{type:0,value:'Stampa su pannello da 11" x 14"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_14X11:[{type:0,value:'Stampa su pannello da 14" x 11"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_16X20:[{type:0,value:'Stampa su pannello da 16" x 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X16:[{type:0,value:'Stampa su pannello da 20" x 16"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_20X30:[{type:0,value:'Stampa su pannello da 20" x 30"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_1_30X20:[{type:0,value:'Stampa su pannello da 30" x 20"'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE:[{type:0,value:'Finitura Opaca<br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY:[{type:0,value:'Finitura Patinata<br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE:[{type:0,value:'Finitura Perlata Premium <br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND:[{type:0,value:'Finitura Opaca<br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione e supporto da tavolo'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND:[{type:0,value:'Finitura Patinata<br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione e supporto da tavolo'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND:[{type:0,value:'Finitura Perlata Premium<br>Bordo effetto legno da 1"<br>Pannello preforato per agevolare l’esposizione e supporto da tavolo'}],PHOTO_TOO_SMALL_IN_SELECTED_SIZE:[{type:0,value:'La foto è troppo piccola per essere stampata con le dimensioni selezionate. Troveremo automaticamente le dimensioni più adatte. <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Per saperne di più.</a>'}],BAD_SIZES:[{type:0,value:'Alcune dimensioni non sono disponibili a causa della risoluzione della foto. <a target="_blank" href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567">Per saperne di più</a>'}],NOT_AVAILABLE:[{type:0,value:"Non disponibile a causa della risoluzione della foto"}],UPLOADR_ERROR_MESSAGE_GENERIC:[{type:0,value:"Si è verificato un problema durante il caricamento della foto. Riprova."}],UPLOADR_ERROR_MESSAGE_FILE_TYPE:[{type:0,value:"Sembra che il tipo di file della foto non sia valido. Carica una foto in formato PNG o JPG."}],UPLOADR_ERROR_MESSAGE_FILE_SIZE:[{type:0,value:"Sembra che la foto sia troppo grande per essere caricata. Possiamo caricare una foto con dimensioni massime di 250 MB."}],UPLOADR_ERROR_MESSAGE_FILE_COUNT:[{type:0,value:"Seleziona solo una foto da caricare."}],UPLOADR_ERROR_MESSAGE_LOW_QUALITY:[{type:0,value:'Questa foto non ha i requisiti minimi necessari per la stampa. Scegli una foto con dimensioni di almeno 975 x 825 pixel. Ulteriori informazioni sui <a href="http://help.yahoo.com/kb/index?page=content&y=PROD_FLICKR&locale=en_US&id=SLN22567" target="_blank">requisiti</a> per i prodotti stampati.'}],UPLOADR_ERROR_MESSAGE_COLOR_SPACE:[{type:0,value:'Impossibile stampare foto con uno spazio dei colori CMYK o ProPhoto RGB. Consigliamo di utilizzare foto con uno spazio dei colori sRGB. <a href="https://help.yahoo.com/kb/flickr/creations-faq-sln22216.html?impressions=true#cont33" target="_blank">Per saperne di più</a>.'}],DRAG_DROP_TO_UPLOAD:[{type:0,value:'Trascina e rilascia la foto da caricare o <a href="#" class="simulate-file-select">cercala sul computer</a>.'}],PHOTOS_UPLOADED_AS_PRIVATE:[{type:0,value:'Le foto caricate saranno aggiunte al <a href="/me/">Fotostream</a> come foto private.'}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_CANVAS:[{type:0,value:"Con questo livello di zoom, la tua foto verrà stampata con una qualità bassa. Fai zoom indietro per acquistare."}],LOW_QUALITY_ZOOM_HANDLE_TOOLTIP_MOUNTED:[{type:0,value:"Con questo livello di zoom, la tua foto verrà stampata con una qualità bassa. Fai zoom indietro per acquistare."}],INITIAL_DIALOG_CANVAS_DISABLED:[{type:0,value:"La stampa su tela non è disponibile per questa foto a causa della bassa risoluzione. La stampa su tela necessita di una risoluzione di almeno 975 x 825 pixel."}],INITIAL_DIALOG_MOUNTED_DISABLED:[{type:0,value:"La stampa su pannello non è disponibile per questa foto a causa della bassa risoluzione. La stampa su pannello necessita di una risoluzione di almeno 1000 x 800 pixel."}],GO_BACK:[{type:0,value:"Indietro"}],PHOTO_NOT_LARGE_ENOUGH_TO_ROTATE:[{type:0,value:"Questa foto è troppo piccola per essere ruotata in un orientamento diverso."}],CHANGE_SIZE:[{type:0,value:"Cambia dimensioni"}],CHANGE_PHOTO:[{type:0,value:"Cambia foto"}],CREATIONS:[{type:0,value:"Creazioni"}],VIEW_ORDER_HISTORY:[{type:0,value:"Visualizza cronologia degli ordini"}],COMPLETED:[{type:0,value:"Terminate"}],IN_PROGRESS:[{type:0,value:"In corso"}],CREATE_NEW:[{type:0,value:"Crea nuovo"}],CREATIONS_EMPTY_WALLART:[{type:0,value:"Nessun quadro da mostrare"}],CREATIONS_EMPTY_BOOKS:[{type:0,value:"Nessun fotolibro da mostrare"}],CREATIONS_EMPTY_TERTIARY:[{type:0,value:'Le creazioni completate o in fase di sviluppo vengono mostrate qui.<br>Ulteriori informazioni su <a href="/create" title="">Wall Art</a> e <a href="/create" title="">fotolibri</a>.'}],CREATIONS_NOT_ABLE_DELETE:[{type:0,value:"Non possiamo eliminare questa creazione. Riprova più tardi."}],PHOTO_FOR_WALLART_DELETED:[{type:0,value:"La foto per questo quadro è stata eliminata"}],DELETE_THIS_WALLART:[{type:0,value:"Elimina questo quadro"}],REORDER_THIS_WALLART:[{type:0,value:"Riordina questo quadro"}],EDIT_THIS_WALLART:[{type:0,value:"Modifica questo quadro"}],CHANGE_PAPER:[{type:0,value:"Cambia carta"}],MATERIAL_DROPUP_LUSTRE_NEW:[{type:0,value:"La finitura Perlata dona alla tua foto una sensazione realistica. Con questa opzione ottieni la saturazione del colore della finitura Patinata ma la resistenza alle impronte di quella Opaca."}],MATERIAL_DROPUP_GLOSSY_NEW:[{type:0,value:"Una finitura lucida e patinata con un aspetto dal contrasto elevato per rendere le tue foto nitide e definite. Perfetta per foto riflettenti di acqua, metallo o cielo."}],MATERIAL_DROPUP_MATTE_NEW:[{type:0,value:"Una finitura elegante e opaca con un contrasto inferiore per esaltare la grana della foto. Resiste alle impronte ed è perfetta per le foto in bianco e nero."}],ON_SALE:[{type:0,value:"Vendita promozionale"}],PRODUCT_DESCRIPTION_CANVAS_PART_2_PREVIEW:[{type:0,value:'<span>Cunei per tendere la tela da 1,25"</span><span>Telaio resistente agli urti</span><span>Accessori per il montaggio inclusi</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_PREVIEW:[{type:0,value:'<span>Finitura Opaca</span><span>Bordo effetto legno da 1"</span><span>Pannello preforato per agevolare l’esposizione</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_PREVIEW:[{type:0,value:'<span>Finitura Patinata</span><span>Bordo effetto legno da 1"</span><span>Pannello preforato per agevolare l’esposizione</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_PREVIEW:[{type:0,value:'<span>Finitura perlata Premium</span><span>Bordo effetto legno da 1"</span><span>Pannello preforato per agevolare l’esposizione</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_MATTE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Finitura Opaca</span><span>Bordo effetto legno da 1"</span><span>Pannello preforato per agevolare l’esposizione e supporto da tavolo</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_GLOSSY_KICKSTAND_PREVIEW:[{type:0,value:'<span>Finitura Patinata</span><span>Bordo effetto legno da 1" </span><span>Pannello preforato per agevolare l’esposizione e supporto da tavolo</span>'}],PRODUCT_DESCRIPTION_MOUNTED_PART_2_LUSTRE_KICKSTAND_PREVIEW:[{type:0,value:'<span>Finitura perlata Premium</span><span>Bordo effetto legno da 1"</span><span>Pannello preforato per agevolare l’esposizione e supporto da tavolo</span>'}],PHOTO_BOOK:[{type:0,value:"Fotolibro"}],GLOSSY_HARDCOVER_BOOK_PREMIUM_LUSTRE_PAPER:[{type:0,value:'Libro da 11" x 8,5" con copertina rigida con finitura patinata e carta con finitura perlata di massima qualità.'}],LOW_QUALITY_WARNING:[{type:0,value:"Questa foto non può essere stampata in quanto la risoluzione è troppo bassa."}],INVALID_COLORSPACE_WARNING:[{type:0,value:"Questa foto non può essere stampata in quanto utilizza uno spazio dei colori non supportato."}],LOW_QUALITY_TYPE_WARNING:[{type:0,value:"Questa foto non può essere stampata con questo tipo di quadro in quanto la risoluzione è troppo bassa."}],NO_COMPLETED_ORDER:[{type:0,value:"Nessun ordine completato."}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-lang-upload-blocking_it-it",(function(e,i){e.Intl.add("hermes/upload-blocking","it-IT",{UPLOADS_LOCKED_SOON:[{type:0,value:"I tuoi caricamenti verranno presto bloccati."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD:[{type:0,value:"A partire dall’8 gennaio, gli account gratuiti su Flickr con "},{type:1,value:"limitCount"},{type:0,value:" foto o più non potranno più caricare nuove foto."}],LEARN_MORE_ABOUT_CHANGES_HERE:[{type:0,value:"Per saperne di più su questi cambiamenti clicca qui."}],UPGRADE_TO_GET_UNLIMITED:[{type:0,value:"Per usufruire di caricamenti illimitati, passa a Pro con il "},{type:1,value:"percentOff"},{type:0,value:"% di sconto utilizzando il codice "},{type:1,value:"couponCode"},{type:0,value:"."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_2:[{type:0,value:"A partire dall’8 gennaio 2019, gli account gratuiti su Flickr con "},{type:1,value:"limitCount"},{type:0,value:" foto o più non potranno più caricare nuove foto. A partire dal 5 febbraio 2019 gli elementi oltre il limite consentito potranno essere eliminati."}],FREE_ACCOUNTS_NO_LONGER_UPLOAD_BY_1_8_2019:[{type:0,value:"A partire dall’8 gennaio, gli account gratuiti su Flickr con "},{type:1,value:"limitCount"},{type:0,value:" o più foto e video non potranno più caricare nuovi contenuti."}],UPGRADE_TO_GET_UNLIMITED_BY_1_8_2019:[{type:0,value:"Per usufruire di caricamenti illimitati, passa a Pro con il "},{type:1,value:"percentOff"},{type:0,value:"% di sconto utilizzando il codice "},{type:1,value:"couponCode"},{type:0,value:". (Sconto valido fino all’8 gennaio 2019)"}],OVER_UPLOAD_LIMIT_HEAD:[{type:0,value:"Le tue foto potrebbero essere eliminate a breve."}],OVER_UPLOAD_LIMIT_COPY:[{type:0,value:'Il tuo account Flickr gratuito è <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limitato a '},{type:1,value:"limitCount"},{type:0,value:'</a> foto o video. Al momento, i tuoi caricamenti sono bloccati e, a partire dal 5 febbraio, i file più vecchi oltre il limite previsto per gli account gratuiti potrebbero essere eliminati. Per sbloccare i caricamenti e proteggere le tue foto e i tuoi video, devi rimuovere i contenuti fino a quando non rientri nel limite previsto per l’account o <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">passare a Flickr Pro</a> per usufruire di uno spazio di archiviazione illimitato.'}],AT_UPLOAD_LIMIT_HEAD:[{type:0,value:"Al momento, i tuoi caricamenti sono bloccati."}],AT_UPLOAD_LIMIT_COPY:[{type:0,value:'Il tuo account Flickr gratuito è <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limitato a '},{type:1,value:"limitCount"},{type:0,value:'</a> foto o video. A partire dal 5 febbraio, i file più vecchi oltre il limite previsto per l’account gratuito potrebbero essere eliminati. Tuttavia, tutti i contenuti con licenza Creative Commons (o altri tipi di licenza gratuita) non verranno eliminati fino al 1 novembre 2018. Per caricare nuove foto o nuovi video, devi rimuovere i contenuti fino a quando non rientri nel limite previsto per l’account o <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">passare a Flickr Pro</a> per usufruire di uno spazio di archiviazione illimitato.'}],UPLOADS_LOCKED_SOON_HEAD:[{type:0,value:"I tuoi caricamenti verranno presto bloccati."}],UPLOADS_LOCKED_SOON_COPY:[{type:0,value:'Stai per raggiungere il limite di <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">'},{type:1,value:"limitCount"},{type:0,value:" file previsto per l’account Flickr gratuito</a>. Per caricare più di "},{type:1,value:"limitCount"},{type:0,value:' foto o video, devi <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'">passare a Flickr Pro</a> per usufruire di un numero di caricamenti illimitato.'}],YOU_CAN_UPLOAD_COUNT_MORE:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Puoi caricare un’altra "},{type:1,value:"countString"},{type:0,value:" foto o video."}]},other:{value:[{type:0,value:"Puoi caricare altre "},{type:1,value:"countString"},{type:0,value:" foto e video."}]}},offset:0,pluralType:"cardinal"}],MORE_THAN_LIMIT_ITEMS_TO_UPLOAD:[{type:6,value:"photoCount",options:{one:{value:[{type:0,value:"Sembrerebbe che ci sia più di un "},{type:1,value:"countString"},{type:0,value:" elemento da caricare. Caricheremo il primo "},{type:1,value:"countString"},{type:0,value:" dal tuo batch."}]},other:{value:[{type:0,value:"Sembrerebbe che ci siano più di "},{type:1,value:"countString"},{type:0,value:" elementi da caricare. Caricheremo i primi "},{type:1,value:"countString"},{type:0,value:" dal tuo batch."}]}},offset:0,pluralType:"cardinal"}],NEVERMIND:[{type:0,value:"Non importa"}],OK_GO_AHEAD:[{type:0,value:"Ok, procedi"}],UPLOAD_QUEUE_FULL:[{type:0,value:"La coda di caricamento è piena."}],GET_PRO_FOR_UNLIMITED:[{type:0,value:"Passa a Pro per usufruire di caricamenti illimitati"}],NOT_NOW:[{type:0,value:"Non ora"}],UPLOAD_YOUVE_REACHED_LIMIT_GET_PRO:[{type:0,value:"Hai raggiunto il limite di caricamento di 1000 elementi. Passa a Pro per usufruire di caricamenti illimitati."}],YOUVE_REACHED_UPLOAD_LIMIT:[{type:0,value:"Hai raggiunto il limite di caricamento di "},{type:1,value:"limitCount"},{type:0,value:" elementi."}],AT_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Il tuo account Flickr gratuito è <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limitato a '},{type:1,value:"limitCount"},{type:0,value:" foto o video</a>. Per caricare più di "},{type:1,value:"limitCount"},{type:0,value:" elementi, devi passare a Flickr Pro per usufruire di spazio di archiviazione illimitato."}],OVER_UPLOAD_LIMIT_COPY_SHORT:[{type:0,value:'Il tuo account Flickr gratuito è <a href="'},{type:1,value:"limitedImagesUrl"},{type:0,value:'" target="_blank">limitato a '},{type:1,value:"limitCount"},{type:0,value:" foto o video</a>. A partire dal 5 febbraio, i file più vecchi che superano il limite previsto potrebbero essere eliminati. Passa a Flickr Pro per usufruire di spazio di archiviazione illimitato."}],PHOTO_EDITOR_REACHED_UPLOAD_LIMIT:[{type:0,value:"Hai raggiunto il tuo limite di "},{type:1,value:"limitCount"},{type:0,value:' elementi. Per salvare una nuova copia, <a href="'},{type:1,value:"upgradeToProUrl"},{type:0,value:'" target="_blank">passa a Flickr Pro</a>.'}],OVER_UPLOAD_LIMIT_EXTEND_HEAD:[{type:0,value:"Aggiornamento: Proroga del termine del limite per l’account Flickr gratuito."}],OVER_UPLOAD_LIMIT_EXTEND_COPY:[{type:0,value:"Ampliamo la scadenza per l’aggiornamento a Flickr Pro per l’archiviazione illimitata o la rimozione di foto/video per soddisfare il nuovo limite di "},{type:1,value:"limit"},{type:0,value:" elementi. La nuova data di scadenza è il giorno "},{type:1,value:"dateNumber"},{type:0,value:" marzo 2019."}],ALL_YOUR_PHOTOS_MATTER:[{type:0,value:'<span class="all-text">TUTTE</span> le tue foto sono importanti.'}],UPLOAD_LIMIT_EXTEND_MODAL_1:[{type:0,value:"Sappiamo che il recente aggiornamento che limita caricamento di "},{type:1,value:"limit"},{type:0,value:" foto e video su account gratuiti di Flickr ha introdotto un importante cambiamento. I fotografi di Flickr ci hanno detto senza esitazioni che è necessario più tempo per assicurarsi che nessuna foto vada persa."}],UPLOAD_LIMIT_EXTEND_MODAL_2:[{type:0,value:"Indipendentemente dal fatto che tu stia passando a Flickr Pro per l’archiviazione illimitata delle foto o che tu stia scaricando le foto per rispettare il nuovo limite, stiamo estendendo la scadenza al giorno "},{type:1,value:"dateNumber"},{type:0,value:" marzo 2019."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES_TAGS:[{type:0,value:"Ciò include alcune delle "},{type:1,value:"views"},{type:0,value:" visualizzazioni, dei "},{type:1,value:"faves"},{type:0,value:" preferiti e dei "},{type:1,value:"tags"},{type:0,value:" tag associati a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS:[{type:0,value:"Ciò include alcune delle "},{type:1,value:"views"},{type:0,value:" visualizzazioni associate a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES:[{type:0,value:"Ciò include alcuni dei "},{type:1,value:"faves"},{type:0,value:" preferiti associati a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_FAVES:[{type:0,value:"Ciò include alcune delle "},{type:1,value:"views"},{type:0,value:" visualizzazioni e dei "},{type:1,value:"faves"},{type:0,value:" preferiti associati a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_TAGS:[{type:0,value:"Ciò include alcuni dei "},{type:1,value:"tags"},{type:0,value:" tag associati a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_VIEWS_TAGS:[{type:0,value:"Ciò include alcune delle "},{type:1,value:"views"},{type:0,value:" visualizzazioni e dei "},{type:1,value:"tags"},{type:0,value:" tag associati a queste foto."}],LIMIT_OVERLAY_STATS_DISAPPEAR_FAVES_TAGS:[{type:0,value:"Ciò include alcuni dei "},{type:1,value:"faves"},{type:0,value:" preferiti e dei "},{type:1,value:"tags"},{type:0,value:" tag associati a queste foto."}],RIGHT_NOW_PHOTOS_AT_RISK:[{type:0,value:"In questo momento "},{type:1,value:"count"},{type:0,value:" delle tue foto rischiano di essere eliminate."}],TAKE_MOMENT_TO_PROTECT_PHOTOS:[{type:0,value:"Dedica un attimo del tuo tempo a proteggere le foto nel tuo account."}],PROTECT_THESE_PHOTOS:[{type:0,value:"Proteggi queste foto."}],SAVE_YOUR_PHOTOS:[{type:0,value:"Salva le tue foto"}],CONTINUE_WITHOUT_SECURING_PHOTOS:[{type:0,value:"Continua senza mettere in sicurezza "},{type:1,value:"count"},{type:0,value:" foto."}],CONTINUE_WITHOUT_SECURING_PHOTOS_B:[{type:0,value:"Continua senza mettere in sicurezza "},{type:1,value:"count"},{type:0,value:" foto"}],MARK_PHOTOS_FOR_DELETION:[{type:0,value:"No, segnane "},{type:1,value:"count"},{type:0,value:" per l’eliminazione."}],MARK_PHOTOS_FOR_DELETION_B:[{type:0,value:"No, segnane "},{type:1,value:"count"},{type:0,value:" per l’eliminazione"}],DONT_REMIND_AGAIN:[{type:0,value:"Non chiederlo più."}],DONT_REMIND_AGAIN_B:[{type:0,value:"Non chiederlo più"}],CHOOSE_ABOVE_TO_CONTINUE:[{type:0,value:"Scegli una delle opzioni sopra indicate per passare alle tue foto."}],DID_YOU_KNOW_FLICKR_PRO:[{type:0,value:"Lo sapevi che Flickr Pro è molto più di un servizio con spazio di archiviazione illimitato?"}],UPGRADE_YOU_ALSO_GET:[{type:0,value:"Ti offre anche navigazione senza annunci pubblicitari, assistenza prioritaria da parte dei nostri esperti e offerte esclusive su fotolibri, software e attrezzatura dei nostri partner commerciali."}],DONT_NEED_TO_BE_PROFESSIONAL:[{type:0,value:"Non è necessario essere fotografi professionisti per utilizzare Flickr Pro."}],FLICKR_PROS_LOVE_PHOTOGRAPHY:[{type:0,value:"I nostri utenti adorano la fotografia, tutto qui. Iscrivendoti a Flickr Pro entrerai a far parte di una community di persone che amano parlare di fotografia nonché condividere e interagire con le foto, proprio come te."}],JOIN_FLICKR_PRO:[{type:0,value:"Iscriviti a Flickr Pro"}],OVER_UPLOAD_LIMIT_HEAD_FINAL:[{type:0,value:"Le tue foto potrebbero essere eliminate."}],OVER_UPLOAD_LIMIT_COPY_FINAL:[{type:0,value:"Il tuo account Flickr gratuito è limitato a "},{type:1,value:"limitCount"},{type:0,value:" foto o video. Gli elementi meno recenti che superano tale limite potrebbero essere eliminati. Passa a Flickr Pro per usufruire di spazio di archiviazione illimitato."}],LIKE_TO_KEEP_YOUR_PHOTOS:[{type:0,value:'Ci piacerebbe conservare tutte le tue foto qui per sempre e gratis, compresa questa, la prima in assoluto che hai caricato su Flickr. Probabilmente saprai anche che abbiamo introdotto <a href="'},{type:1,value:"rulesUrl"},{type:0,value:'">nuove regole per gli account gratuiti</a> e che potresti dover eliminare alcune foto se superano i nuovi limiti. Hai '},{type:1,value:"photoCountString"},{type:0,value:" che non possiamo più conservare gratuitamente. Facci sapere come vuoi procedere."}],DONT_SAVE_MY_PHOTOS:[{type:0,value:"Non salvare le mie foto"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-fluid-modal-nav-bar",(function(l,n){var e=l.Template.Handlebars.revive({1:function(l,n,e,a,t){var o,r=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return null!=(o=r(e,"unless").call(null!=n?n:l.nullContext||{},null!=n?r(n,"disabled"):n,{name:"unless",hash:{},fn:l.program(2,t,0),inverse:l.noop,data:t,loc:{start:{line:5,column:3},end:{line:7,column:14}}}))?o:""},2:function(l,n,e,a,t){var o,r,u=null!=n?n:l.nullContext||{},i=l.hooks.helperMissing,c="function",s=l.escapeExpression,m=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'\t\t\t<li data-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=n?m(n,"id"):n))?r:i)===c?r.call(u,{name:"id",hash:{},data:t,loc:{start:{line:6,column:16},end:{line:6,column:22}}}):r)+'" data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=n?m(n,"value"):n))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:36},end:{line:6,column:45}}}):r)+'" class="link '+(null!=(o=m(e,"if").call(u,null!=n?m(n,"selected"):n,{name:"if",hash:{},fn:l.program(3,t,0),inverse:l.noop,data:t,loc:{start:{line:6,column:59},end:{line:6,column:90}}}))?o:"")+" "+(null!=(o=m(e,"if").call(u,null!=n?m(n,"hiddenByDefault"):n,{name:"if",hash:{},fn:l.program(5,t,0),inverse:l.noop,data:t,loc:{start:{line:6,column:91},end:{line:6,column:127}}}))?o:"")+'" tabindex="0"><a data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=n?m(n,"value"):n))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:157},end:{line:6,column:166}}}):r)+'">'+s(typeof(r=null!=(r=m(e,"name")||(null!=n?m(n,"name"):n))?r:i)===c?r.call(u,{name:"name",hash:{},data:t,loc:{start:{line:6,column:168},end:{line:6,column:176}}}):r)+"</a></li>\n"},3:function(l,n,e,a,t){return"selected"},5:function(l,n,e,a,t){return"hidden"},7:function(l,n,e,a,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t</form>\n'},compiler:[8,">= 4.3.0"],main:function(l,n,e,a,t){var o,r=null!=n?n:l.nullContext||{},u=l.lookupProperty||function(l,n){if(Object.prototype.hasOwnProperty.call(l,n))return l[n]};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(o=u(e,"each").call(r,null!=n?u(n,"links"):n,{name:"each",hash:{},fn:l.program(1,t,0),inverse:l.noop,data:t,loc:{start:{line:4,column:2},end:{line:8,column:11}}}))?o:"")+"\t\t</ul>\n"+(null!=(o=u(e,"if").call(r,null!=n?u(n,"enableSearch"):n,{name:"if",hash:{},fn:l.program(7,t,0),inverse:l.noop,data:t,loc:{start:{line:10,column:2},end:{line:15,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),a={};l.Array.each([],(function(n){var e=l.Template.get("hermes/"+n);e&&(a[n]=e)})),l.Template.register("hermes/fluid-modal-nav-bar",(function(n,t){return(t=t||{}).partials=t.partials?l.merge(a,t.partials):a,e(n,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",(function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],a=this.appContext.viewportData.getWidth();for(i=n.sort((function(e,t){return e.maxWidth-t.maxWidth})),t=0;t<i.length;t++)if(a<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this;return this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach((function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))})),this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,a=t.target,s=a.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;"a"===a.getDOMNode().tagName.toLowerCase()?(t.halt(),this.deselectAll(),s.addClass("selected"),this.set("currentSelection",s),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):a.hasClass("link")?(t.halt(),this.deselectAll(),a.addClass("selected"),this.set("currentSelection",a),(i=l.one(".search-field"))&&(i.getDOMNode().value=""),this.fire("subviewViewEvent","navigation",t)):(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===a.getDOMNode().type&&(t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o,this.fire("subviewViewEvent","search",r),this.deselectAll(),this.set("currentSelection",{type:"search",modelParams:r}))))},onParentViewEvent:function(t,i){var n=this.get("currentSelection");"backToList"===i[0]&&(n instanceof e.Node?this.get("currentSelection").getDOMNode().click():"search"===n.type&&this.fire("subviewViewEvent","search",n.modelParams))}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","attribute-helpers","search-helper"],langBundles:["common","wallart"],optional:["person-models","photo-models"]});YUI.add("photo-prints-helper",(function(e,r){var t=require("url-parse"),i=require("hermes-core/flog")(r),n=require("superagent"),s=e.mix({langBundles:["prints"]},e.Localizable),o={default:"prints.SOMETHING_WRONG_PREPARING_PRINT",4:"prints.UNSUPPORTED_FILE_TYPE_PLEASE_JPG"};e.PhotoPrintsHelper=function(r){var a=e.config.flickr.flickrprints.devBaseUrl,l=e.config.flickr.flickrprints.baseUrl,c=e.config.flickr.flickrprints.cartPath,p=e.config.flickr.flickrprints.devApiKey,u=e.config.flickr.flickrprints.apiKey;return{isPrintFeatureEnabled:function(){return r.getViewer().signedIn||!r.getViewer().signedIn&&r.flipper.isFlipped("enable-buy-others-prints")},canPrintPhoto:function(e,t){return this.isPrintFeatureEnabled()&&!e.getValue("isVideo")&&!t.getValue("isIgnoredBy")&&(e.getValue("isOwner")||r.flipper.isFlipped("enable-buy-others-prints")&&!e.getValue("isOwner")&&e.getValue("engagement").getValue("canPrint"))},registerPrint:function(t,i){var n=this;return r.callAPI("flickr.printservice.getRedirectURL",{user_id:t.getValue("owner").getValue("id"),photo_id:t.getValue("id"),return_url:i}).then((function(r){return n.isPrintUrlSafe(r.redirectURL)?{redirectURL:r.redirectURL}:e.Promise.reject({message:n.getRegisterPrintErrorCodeMessage()})})).catch((function(e){throw{message:n.getRegisterPrintErrorCodeMessage(e.code)}}))},isPrintUrlSafe:function(e){var r=new t(e);return"https:"===r.protocol&&"https://"+r.hostname===this.getBaseUrl()},getBaseUrl:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?l:a},getApiKey:function(){return r.flipper.isFlipped("enable-photo-prints-prod-url")?u:p},getCartUrl:function(){return this.getBaseUrl()+c},fetchCartCount:function(){var e=this.getBaseUrl()+"/api/v2/cart?APIKey="+this.getApiKey();return n.get(e).withCredentials().set("Accept","application/json").then((function(e){return{count:e&&e.body.Response.Cart?e.body.Response.Cart.ItemCount:0}})).catch((function(e){throw i.error("Error fetching cart count",{err:e}),e}))},fetchOrder:function(e){var r=this.getBaseUrl()+"/api/v2/order/"+e+"?_expand=OrderBillingAddress&APIKey="+this.getApiKey();return n.get(r).withCredentials().set("Accept","application/json").then((function(r){var t="/api/v2/order/"+e+"!billingaddress",i=r.body.Response.Order,n=r.body.Expansions[t];return{orderId:i.OrderID,orderUrl:i.WebUri,email:n.OrderBillingAddress.Email}}))},getRegisterPrintErrorCodeMessage:function(e){var r=e?e.toString():"";return o.hasOwnProperty(r)?s.intlMessage({intlName:o[r]}):s.intlMessage({intlName:o.default})}}}}),"@VERSION@",{requires:[],optionalRequires:["hermes-core"]});YUI.add("global-nav-view",(function(e,t){var i=require("hermes-core/flog")(t),n=new e.SubscriptionsHelper,o=[{type:"migrateSubscription",priority:0,placement:"header"},{type:"pastDue",priority:1,placement:"header"},{type:"eoy22",priority:1,placement:"header"},{type:"loginMigration",priority:2,placement:"header"},{type:"exploredUpsell",priority:3,placement:"header"},{type:"printShop",priority:4,placement:"header"},{type:"churnedProBanner",priority:3,placement:"header"},{type:"ybsExplore",priority:4,placement:"header"},{type:"mfy22",priority:4,placement:"header"},{type:"bhm23",priority:3,placement:"header"},{type:"cookieConsent",priority:0,placement:"footer"},{type:"cookie",priority:0,placement:"footer"},{type:"defaultSafetyMigration",priority:0,placement:"modal"},{type:"surveyModal",priority:3,placement:"modal"},{type:"uploadLimit",priority:1,placement:"toast"}];e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){var i,n;if(void 0===t.enableBrowserUpgradeBanner&&(t.enableBrowserUpgradeBanner=!0),this.set("showBrowserUpgradeBanner",!1),YUI.Env.isServer&&t.enableBrowserUpgradeBanner){var o=this.appContext.request.headers["user-agent"],r=e.BrowserSupport.isUnsupportedBrowser(o),a=e.BrowserSupport.isBot(o),s=e.BrowserSupport.isSharingBot(o);!r||a||s||this.set("showBrowserUpgradeBanner",!0)}if(!YUI.Env.isServer){var l=e.StorageHelper.getItem("hasDismissedBrowserUpgradeBanner",!0);l&&"true"===l&&this.set("showBrowserUpgradeBanner",!1)}return""===this.get("container").get("innerHTML")&&this.setContainerHTML('<div class="global-nav-content"></div>'),this.appStateParams=t,this.themeClass=t.theme||"default-theme",i=this.appContext.getLocation(),n=t.modelParams&&t.modelParams.apiParams?t.modelParams.apiParams:i.href,this.searchUrl=new e.SearchUrl(n,this.appContext,t.searchType),this.isSOHP=t.isSOHP,this.isProPage=t.isProPage,this.disableMobileNav=t.disableMobileNav,this.hideBanner=t.isSearchResults,this.isRefencingAnnouncementPage=t.isRefencingAnnouncementPage,this.uploadLimitDismissHours=48,this.isDesktopWidthBreakpoint=1080,this.photoPrintsHelper=new e.PhotoPrintsHelper(this.appContext),this.mathHelper=new e.MathHelper,this.hasPendingGift=!1,this.hasExpiringGift=!1,this.convertDurationToString={week:this.intlMessage({intlName:"gift-pro.1_WEEK"}),month:this.intlMessage({intlName:"gift-pro.1_MONTH"}),year:this.intlMessage({intlName:"gift-pro.1_YEAR"})},this.STATUS_PENDING=1,this.STATUS_MUTED=2,this.STATUS_ACCEPTED=3,this.STATUS_REJECTED=4,this.STATUS_EXPIRED=5,this},subviewConfig:{"search-autosuggest-field-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,isSOHP:this.isSOHP},"account-menu-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0},"notifications-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.getViewer().signedIn}},"browser-upgrade-banner-view":{requiredToShowOnServer:!0,requiredToShowOnClient:!1,dealbreaker:!1,disabled:function(){return!this.get("showBrowserUpgradeBanner")}},"person-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"group-menu-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,containerSelector:"#content, #stacking-overlay-container",excludeSelectors:[".c-account-menu"]},"partner-account-banner-view":{requiredToShowOnServer:!1,requiredToShowOnClient:!1},"featured-toast-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1},"flickr-chat-center-view":{requiredToShowOnClient:!1,requiredToShowOnServer:!1,disabled:function(){return!this.appContext.flipper.isFlipped("enable-flickr-chat")||!this.appContext.getViewer().signedIn}},"slim-footer-view":{requiredToShowOnClient:!0,requiredToShowOnServer:!0,additionalViewClasses:["navbar-footer-placement","mobile-nav-drawer-list"],disabled:function(){return!this.appContext.flipper.isFlipped("enable-cookie-consent-execution-hermes")}}},loadState:function(){var t=this,i=this.appContext.getViewer(),n=[];return i.signedIn?(n.push(this.appContext.getModel("person-models",i.nsid).then((function(e){t.set("viewer",e),t.elementStates=t.setElementStates(t.appStateParams)}))),n.push(this.appContext.getModel("person-profile-models",i.nsid).then((function(e){t.profileModel=e})))):this.elementStates=this.setElementStates(this.appStateParams),e.Promise.all(n)},buildContainer:function(){var t,i={},o=this.appContext.getViewer().signedIn;return this.get("viewer")&&(i=e.merge(this.get("viewer").toJSON(),{urls:e.URLHelper.generatePersonUrls(this.get("viewer"))})),t={theme:this.themeClass,disableMobileNav:this.disableMobileNav,"show-browser-upgrade-banner":this.get("showBrowserUpgradeBanner"),showNotificationsMenu:!1,viewer:i,isSignedIn:o,elements:this.elementStates,isRefencingAnnouncementPage:this.isRefencingAnnouncementPage,upgradeProLink:n.getProLandingPageUrl(n.UTM_GLOBAL_NAV,{utm_content:this.intlMessage({intlName:"common.GET_PRO"})})},o&&(t["notifications-menu-view"]=this.subviews["notifications-menu-view"].get("container"),t.showNotificationsMenu=!0),this.photoPrintsHelper.isPrintFeatureEnabled()&&(t.printCartUrl=this.photoPrintsHelper.getCartUrl()),this.setContainerWithTemplate("global-nav",t),this},activate:function(){var n=this,r=(this.appContext.flapp.get("activeView").name,this.get("container")),a=this.appContext.getViewer(),s=r.one(".gn-upload .gn-title");return this.contentContainer=r.one(".global-nav"),r.one(".mobile-nav-toggle")&&(this.navDrawer=r.one(".mobile-nav-drawer"),this.navDrawerOverlay=r.one(".mobile-nav-drawer-overlay"),this.registerEventHandler(r.one(".mobile-nav-toggle").on("click",(function(e){n.navDrawerShown?n.hideMobileNavDrawer():n.showMobileNavDrawer()}))),this.registerEventHandler(this.navDrawer.delegate("click",this.handleDrawerItemClick.bind(this),".mobile-nav-menu-item, .slim-footer > :not(.lang-switcher)"))),r.one(".mobile-search-button")?(this.registerEventHandler(r.one(".mobile-search-button").on("click",function(e){n.contentContainer.addClass("search-open"),n.fire("parentViewEvent","focus-search-field"),r.one(".flickr-logo-container").addClass("hidden")}.bind(this))),this.registerEventHandler(e.on("add-context-to-search-field",(function(e,t=!0){n.contentContainer.addClass("search-open"),t&&n.fire("parentViewEvent","focus-search-field")}),this))):this.registerEventHandler(e.globalEvents.subscribe("window:resize",function(t){var i=e.config.win.innerWidth<=this.isDesktopWidthBreakpoint,o=i?this.appContext.viewportData.getWidth():0,a=i?46:0;i||(n.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden")),n.fire("parentViewEvent","resize-search-field",o-a)}.bind(this))),r.one(".mobile-search-close-button")&&this.registerEventHandler(r.one(".mobile-search-close-button").on("click",function(e){n.contentContainer.removeClass("search-open"),r.one(".flickr-logo-container").removeClass("hidden"),n.fire("parentViewEvent","clear-search-field")}.bind(this))),a.signedIn||s&&this.registerEventHandler(s.on("click",this.signUpAndUpload.bind(this))),e.AnchorRepositioner.addOffset(t,r),this.registerEventHandler(r.delegate("keydown",this.toggleSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.delegate("keydown",this.enterSubmenu.bind(this),"a[aria-haspopup=true]")),this.registerEventHandler(r.on("keydown",this.goToSubmenuHeading.bind(this),"ul.gn-submenu")),this.registerEventHandler(r.delegate("keydown",this.keyboardNavigation.bind(this),"ul.nav-menu")),this.registerEventHandler(r.delegate("mouseup",this.toggleAriaExpanded.bind(this),"a[aria-haspopup=true]")),this.toastSubview=this.subviews["featured-toast-view"],this.registerEventHandler(e.on("accountCard:overLimitLearnMoreClick",(function(){n.showOverLimitToast()}))),this.registerEventHandler(e.on("printsPage:choosePhotosClicked",(function(){n.handlePrintClick()}))),this.photoPrintsHelper.isPrintFeatureEnabled()&&(this.printsButton=r.one(".gn-create .prints-button"),this.mobilePrintsButton=r.one(".mobile-nav-drawer .prints-button"),this.cartLink=r.one(".gn-create .cart-link"),this.mobileCartLink=r.one(".mobile-nav-drawer .cart-link"),this.printsButton&&this.registerEventHandler(this.printsButton.on("click",this.handlePrintClick.bind(this))),this.mobilePrintsButton&&this.registerEventHandler(this.mobilePrintsButton.on("click",this.handlePrintClick.bind(this))),(this.cartLink||this.mobileCartLink)&&(this.photoPrintsHelper.fetchCartCount().then((function(e){var t=e?e.count:0,i=n.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:void 0!==t?t.toString():"0"});t>0&&(n.cartLink.removeClass("disabled"),n.mobileCartLink.removeClass("disabled")),n.cartLink.set("innerHTML",i),n.mobileCartLink.set("innerHTML",i)})).catch((function(e){var t=n.intlMessage({intlName:"prints.VIEW_CART_WITH_COUNT",count:"0"});n.cartLink.set("innerHTML",t),n.mobileCartLink.set("innerHTML",t)})),this.prepareOrderConfirmationModal())),this.appContext.bannerManager.loadBanners(o).then((function(){var e=this.appContext.bannerManager.getBanners(["header","footer","modal"]);0===e.length&&(e=this.appContext.bannerManager.getBanners(["toast"])),e.forEach((function(e){return this.appContext.bannerManager.renderBannerView(e)}))})),this.registerEventHandler(this.appContext.bannerManager.on("renderBanner",(function(t){var i,o,a;if("header"===t.placement)return o=(i=t.bannerView).get("container"),(a=r.one(".nav-banner-container")).empty(),a.appendChild(o),i.on("subviewActivated",(function(){e.fire("globalNav:bannerSubviewActivated")})),n.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),i.destroy(),e.fire("globalNav:bannerDismissed")}))),i.normalizedActivate();if("toast"===t.placement)return o=(i=t.bannerView).get("container"),i.activate().then((function(){var e=i.subview;n.toastSubview.setup(e.featuredToastConfig),n.toastSubview.on("primaryActionClicked",(function(t){e.handleToastPrimaryActionClick(t)})),n.toastSubview.on("secondaryActionClicked",(function(t){e.handleToastSecondaryActionClick(t)})),n.registerEventHandler(i.on("dismissed",(function(){i.get("container").remove(),n.toastSubview.dismiss()}))),n.toastSubview.show()}));if("modal"===t.placement){i=t.bannerView;var s=e.merge({appContext:n.appContext,noScroll:!0,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,dismissOnOverlayClick:!0,contentPadding:0,classList:"modal-restyle",width:560,subview:i},t.containerConfig),l=new e.Views.FluidModal(s);l.show(),n.registerEventHandler(l.on("close",(()=>{i.handleContainerClose()}))),n.registerEventHandler(i.on("dismissed",(()=>{l.close()})))}}))),a.signedIn&&"pro-checkout-route"!==this.appContext.routeConfig.module&&this.appContext.callAPI("flickr.payments.getUserGiftList",{status:"1,2"}).then(function(t){this.hasPendingGift=t.hasPendingGifts&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_pending_gift_modal_name),this.pendingGifts=[],this.expiringGifts=[],(t.hasPendingGifts||t.hasMutedGifts)&&t.gifts.forEach(function(t){if(t.giftStatus===this.STATUS_PENDING&&this.pendingGifts.push(t),t.giftStatus===this.STATUS_MUTED){var i=e.moment.unix(t.giftGivenDate).add(1,"Y");e.moment(i).subtract(1,"w").isBefore(e.moment())&&this.expiringGifts.push(t)}}.bind(this)),this.expiringGifts.length>0&&!this.appContext.getCookie(e.config.flickr.modals.dismiss_expiring_gift_modal_name)&&this.showExpiringGiftModal(),this.hasPendingGift&&this.showPendingGiftModal()}.bind(this)).catch(function(e){i.log(e)}.bind(this)),this},showHelloProModal:function(){var t=e.URLHelper.generatePersonUrls(this.get("viewer")),i=new e.Views.FluidModal({actionButtonLabel:this.intlMessage({intlName:"checkout.OK_THANKS"}),htmlMessage:this.templates("pro-hello-pro")({photostreamURL:e.url(t.photostream)}),showBodyLines:!0,showHeader:!1,appContext:this.appContext,dismissOnOverlayClick:!1,dismissOnActionClick:!0,actionButtonDisabled:!1,actionButtonIsDangerous:!1,showCancelButton:!1,classList:"welcome-pro-modal",showCancelX:!1});i.on("activated",(function(t){var n=i.get("container").one(".freebrowsing"),o=i.get("container").one(".auto-uploadr"),r=i.get("container").one(".partners");n.on("click",(function(t){e.config.win.location=e.url("/")})),o.on("click",(function(t){e.config.win.location=e.url("/tools")})),r.on("click",(function(t){e.config.win.location=e.url("/account")}))})),i.on("actionClick",(function(){e.config.win.location.reload()})),i.show()},showExpiringGiftModal:function(){var e,t,i,n=!1,o={};(this.expiringGifts.length>1&&(n=!0),n)?(e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE_MULTIPLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON_MULTIPLE",count:this.expiringGifts.length})):(i=(o=this.expiringGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.GIFT_WAITING_TITLE"}),t=this.intlMessage({intlName:"gift-pro.EXPIRES_SOON",giverName:i,duration:this.convertDurationToString[o.giftType]}));var r={modalTitle:e,modalText:t,hasMultiple:n,gift:o,cookieName:"dismiss_expiring_gift_modal_name",giftList:this.expiringGifts,isExpiringGift:!0};this.setupGiftModal(r)},showPendingGiftModal:function(){var e,t,i=this.intlMessage({intlName:"gift-pro.YOUVE_GOT_GIFT"}),n=!1,o={};(this.pendingGifts.length>1&&(n=!0),n)?e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_MULTIPLE",count:this.pendingGifts.length}):(t=(o=this.pendingGifts[0]).giverNsid||o.giverName?o.giverName:this.intlMessage({intlName:"gift-pro.ANONYMOUS"}),e=this.intlMessage({intlName:"gift-pro.LUCKY_RECIPIENT_ACTIVATE_NOW",giverName:t,duration:this.convertDurationToString[o.giftType]}));var r={modalTitle:i,modalText:e,hasMultiple:n,gift:o,cookieName:"dismiss_pending_gift_modal_name",giftList:this.pendingGifts,isExpiringGift:!1};this.setupGiftModal(r)},setupGiftModal:function(t){var i,o=this,r=this.templates("pending-gift-modal")({modalTitle:t.modalTitle,modalText:t.modalText,hasMultiple:t.hasMultiple});return(i=new e.Views.FluidModal({appContext:o.appContext,noScroll:!0,dismissOnOverlayClick:!1,showActionButton:!1,actionButtonIsDangerous:!1,showCancelButton:!1,maxHeight:!1,htmlMessage:r,showBodyLines:!0,showHeader:!1,showCancelX:!1,buttonFlavorText:this.intlMessage({intlName:"gift-pro.DO_LATER"}),classList:"pending-gift-pro-modal"})).show(),i.on("activated",(function(){var r=i.get("container").one(".activate-button"),a=i.get("container").one(".decline-button"),s=i.get("container").one(".view-gifts-button"),l=i.get("container").one(".flavor-text"),c=i.get("container").one(".error-text");r&&r.on("click",(function(d){r.setAttribute("disabled"),a&&a.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=o.get("viewer").getValue("isPro"),p=[];p.push({gift_id:t.gift.giftId,status:o.STATUS_ACCEPTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(p)}).then((function(d){0===d.gift_update_fail_count?(i.close(),h?e.config.win.location.reload():o.showHelloProModal(),n.sendGiftPurchaseEvent({step:"gift_accepted",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),r.removeAttribute("disabled"),a&&a.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),a&&a.on("click",(function(d){a.setAttribute("disabled"),r&&r.setAttribute("disabled"),s&&s.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var h=[];h.push({gift_id:t.gift.giftId,status:o.STATUS_REJECTED}),o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(h)}).then((function(d){0===d.gift_update_fail_count?(i.close(),e.config.win.location.reload(),n.sendGiftPurchaseEvent({step:"gift_rejected",recipientNsid:o.get("viewer").id,gifterNsid:t.gift.giverNsid,duration:o.modalParams.gift.giftType,giftId:t.gift.giftId})):(c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto"))})).catch((function(e){c.addClass("error-occurred"),a.removeAttribute("disabled"),r&&r.removeAttribute("disabled"),s&&s.removeAttribute("disabled"),l&&l.setStyle("pointerEvents","auto")}))})),s&&s.on("click",(function(n){s.setAttribute("disabled"),r&&r.setAttribute("disabled"),a&&a.setAttribute("disabled"),l&&l.setStyle("pointerEvents","none");var c=t.isExpiringGift||!1,d=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(d)}).then((function(n){if("ok"!==n.stat||c){var r=new Date;r.setTime(r.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:r,path:"/"})}i.close(),o.appContext.flapp.navigate("/account")}))})),l&&l.on("click",(function(n){i.close();var r=t.isExpiringGift||!1,a=t.giftList.map((e=>({gift_id:e.gift_id,status:o.STATUS_MUTED})));o.appContext.callAPI("flickr.payments.updateUserGiftStatus",{gifts:JSON.stringify(a)}).then((function(i){if("ok"!==i.stat||r){var n=new Date;n.setTime(n.getTime()+864e5),o.appContext.cookieCatcher.setCookieIfAllowed(e.config.flickr.modals[t.cookieName],1,{expires:n,path:"/"})}}))}))})),e.Promise.resolve()},clearKeyboardFocus:function(e){this.get("container").all(".has-keyboard-focus").removeClass("has-keyboard-focus"),this.get("container").all(".nav-menu a[aria-expanded=true]").setAttribute("aria-expanded","false")},toggleAriaExpanded:function(e){e.target.setAttribute("aria-expanded","false"===e.target.getAttribute("aria-expanded")?"true":"false")},enterSubmenu:function(e){if(40===e.keyCode){e.preventDefault();var t=e.target.next("ul");t&&t.hasClass("has-keyboard-focus")&&t.one(":first-child").one(":first-child").focus()}},toggleSubmenu:function(e){var t=e.keyCode;if(13===t||32===t){e.preventDefault();var i=e.target.next("ul");i&&(i.hasClass("has-keyboard-focus")?this.clearKeyboardFocus():(i.addClass("has-keyboard-focus"),e.target.setAttribute("aria-expanded","true")))}},goToSubmenuHeading:function(e,t){var i;(t||27===e.keyCode)&&(t||this.clearKeyboardFocus(),e.target.hasClass("gn-submenu")?i=e.target.previous("a"):e.target.ancestor("ul.gn-submenu")&&(i=e.target.ancestor("ul.gn-submenu").previous("a")),i&&i.focus())},keyboardNavigation:function(e){var t=e.keyCode,i=9===t&&e.shiftKey,n=9===t&&!e.shiftKey;e.target.hasClass("gn-title")?(i=(37===t||i)&&e.target.ancestor("li").previous("li"),n=(39===t||n)&&!!e.target.ancestor("li").next("li"),i?(this.clearKeyboardFocus(),this.focusOnPreviousItem(e)):!n||e.target.next("ul")&&e.target.next("ul").hasClass("has-keyboard-focus")||(this.clearKeyboardFocus(),this.focusOnNextItem(e))):38===t||i?this.focusOnPreviousItem(e):(40===t||n)&&this.focusOnNextItem(e)},focusOnPreviousItem:function(e){e.preventDefault();var t=e.target.ancestor("li").previous("li:not(.divider)");t?t.one(":first-child").focus():e.target.ancestor("ul.gn-submenu")&&this.goToSubmenuHeading(e,!0)},focusOnNextItem:function(e){e.preventDefault();var t=e.target.ancestor("li").next("li:not(.divider)");t&&t.one(":first-child").focus()},signUpAndUpload:function(t){var i,n=e.url("/upload/"),o=this.intlMessage({intlName:"global-nav.UPLOAD_MODAL_SIGNUP_TITLE"});t.halt(),e.rapidTracker.beacon(this.name,"uploadButtonClick"),(i=new e.Views.SignUpModal({appContext:this.appContext,signUpHeaderClass:"signup-upload",signUpTitle:o,beaconPrefix:"upload"})).on("signUpClick",(function(t){e.SigninHelper._redirectToSignUp("upload",{postLoginUrl:n})})),i.on("signInClick",(function(t){e.SigninHelper._redirectToSignin("upload",{postLoginUrl:n})})),i.show()},executeSearch:function(e){var t,i=this.get("container").one("#gn-search-field").getDOMNode();t=this.searchUrl.createNewSearch(i.value).getURL(),e.halt(),this.appContext.flapp.navigate(t)},setElementStates:function(e){var t=this.appContext.getViewer(),i=e.isSOHP&&!t.signedIn,n=e.isProPage,o={you_link:!1,you_menu:!1,contacts_menu:!1,groups_menu:!1,explore_menu:!1,weekly_flickr:!1,get_pro_link:!0,upload_icon:!1,account_menu:!1,search_bar:!1,signup_link:!1,signin_link:!1,right_side_signup:!0,vr_link:!0,sidebar_signin_link:!1};return i?(o.search_bar=!0,o.signin_link=!0,o.signup_link=!0,o.get_pro_link=!1):n?(o.you_menu=!1,o.explore_menu=!1,o.upload_icon=!1,o.search_bar=!1,o.account_menu=!0,o.get_pro_link=!1):t.signedIn?(o.you_menu=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.account_menu=!0):(o.signup_link=!0,o.explore_menu=!0,o.upload_icon=!0,o.search_bar=!0,o.signin_link=!0),this.get("viewer")&&this.get("viewer").getValue("isPro")&&(o.stats=!0,o.get_pro_link=!1),"en-us"===this.appContext.lang.toLowerCase()&&(o.weekly_flickr=!0),n||i||(o.prints_menu=!0,o.print_shop_link=this.appContext.flipper.isFlipped("enable-prints-discovery-page")),o.events_link=!0,o.weekly_flickr=!1,o.vr_link=!1,this.isSOHP||t.signedIn||(o.sidebar_signin_link=!0),o},isExpiringPartnerAccount:function(){var e=this.get("viewer").getValue("expiringPartner");return this.appContext.flipper.isFlipped("enable-partner-account-banner")&&e&&-1===["embedr-route","browser-upgrade-interstitial-route","products-marketplace-eol-route","products-account-payouts-route","error-route"].indexOf(this.appContext.routeConfig.module)},handleToastActionClick:function(t){var i=t&&t.clickEvent?t.clickEvent.target.getAttribute("href"):null;i?e.config.win.location.href=i:this.toastSubview.dismiss()},setProRedirectCookie:function(){var t=new Date;t.setTime(t.getTime()+60*e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_hours*60*1e3),this.appContext.setCookie({cookieName:e.config.flickr.upload_blocking.photo_limit_pro_redir_cookie_name,cookieValue:1,expires:t,path:"/"})},showOverLimitToast:function(){this.toastSubview&&this.appContext.flipper.isFlipped("enable-upload-limit-messages")&&e.UserLimitsHelper.isOverARRLimit(this.profileModel,this.appContext)&&(this.toastSubview.setup({htmlContent:this.templates("upload-limit-message")({title:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_HEAD_FINAL"}),description:this.intlMessage({intlName:"upload-blocking.OVER_UPLOAD_LIMIT_COPY_FINAL",limitCount:e.config.flickr.account.photo_limit.toLocaleString(this.appContext.lang,{maximumFractionDigits:0})}),primaryActionText:this.intlMessage({intlName:"common.GET_PRO"}),secondaryActionText:this.intlMessage({intlName:"common.DISMISS"})}),classList:["urgent"]}),this.toastSubview.on("primaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.on("secondaryActionClicked",this.handleToastActionClick.bind(this)),this.toastSubview.show())},handlePrintClick:function(){"en-us"===this.appContext.lang.toLowerCase()?this.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?this.showPrintSelector():this.showIntroToPrintsModal():this.showEnglishPrintWarningModal()},showPrintSelector:function(){var t=this,i=this.intlMessage({intlName:"prints.CHOOSE_PHOTO_TO_GET_PRINTS"}),n=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],o=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"},{id:"upload",name:this.intlMessage({intlName:"global-nav.UPLOAD"}),value:"upload"}],r=[{id:"photostream",name:this.intlMessage({intlName:"common.PHOTOSTREAM"}),value:"photostream",selected:!0},{id:"sets",name:this.intlMessage({intlName:"common.ALBUMS"}),value:"sets"}],a={appContext:this.appContext,searchable:{yours:!0,contacts:!1,everyone:!1,marketplace:!1}};this.printSelector=new e.Views["photo-selector-view"](a),this.printSelectorModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!0,dismissOnActionClick:!1,showBodyLines:!0,showCancelButton:!1,showCancelX:!0,title:"",navBarView:new e.Views["fluid-modal-nav-bar-view"]({appContext:this.appContext,links:n,enableSearch:!0,breakpointConfig:[{maxWidth:700,links:o,enableSearch:!1},{maxWidth:500,links:r,enableSearch:!1}]}),actionButtonLabel:this.intlMessage({intlName:"prints.BUY_PRINTS"}),actionButtonDisabled:!0,subview:this.printSelector,width:Math.round(.8*Math.max(1280,e.config.win.innerWidth)),height:Math.round(e.config.win.innerHeight-60),fullWindow:!0,classList:"photo-selector",buttonFlavorText:i,flexLayout:!0}),this.printSelectorModal.show(),this.printSelectorModal.registerEventHandler(e.on("photoSelector:selected",(function(e){t.printSelectorModal.enableActionButton(),t.printSelectorModal.setFlavorText(i)}))),this.printSelectorModal.registerEventHandler(e.on("photoSelector:unselected",(function(e){t.printSelectorModal.disableActionButton()}))),this.printSelectorModal.on("actionClick",this.handleBuyPrintClick.bind(t))},handleBuyPrintClick:function(){var t,i=this,n=this.printSelector.get("selected");e.config.win.location.href;this.printSelectorModal.disableActionButton(!0),this.appContext.getModel("photo-models",n).then((function(e){return t=e,i.appContext.getModel("person-relationship-models",t.getValue("owner").getValue("nsid"))})).then((function(n){return i.photoPrintsHelper.canPrintPhoto(t,n)?i.photoPrintsHelper.registerPrint(t,e.config.win.location.href):e.Promise.reject({message:"Error: Can’t print photo."})})).then((function(t){e.config.win.location.href=t.redirectURL})).catch((function(e){i.printSelectorModal.enableActionButton(),i.printSelectorModal.setFlavorText(e.message||i.intlMessage({intlName:"prints.SOMETHING_WRONG_PREPARING_PRINT"}),!0)}))},showEnglishPrintWarningModal:function(t){var i=this;this.englishPrintWarningModal=new e.Views.FluidModal({appContext:this.appContext,dismissOnOverlayClick:!1,showActionButton:!0,actionButtonLabel:this.intlMessage({intlName:"prints.CONTINUE_IN_ENGLISH"}),showCancelButton:!0,cancelButtonLabel:"en-us"===this.appContext.lang.toLowerCase()?this.intlMessage({intlName:"common.GO_BACK_BUTTON"}):this.intlMessage({intlName:"common.CANCEL"}),showCancelX:!1,showHeader:!0,showFooter:!0,title:this.intlMessage({intlName:"prints.ENGLISH_LANGUAGE_AHEAD"}),message:this.intlMessage({intlName:"prints.ORDERING_IS_ENGLISH_ONLY"})}),this.englishPrintWarningModal.show(),this.englishPrintWarningModal.on("actionClick",(function(){setTimeout((function(){i.appContext.getCookie(e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name)?i.showPrintSelector():i.showIntroToPrintsModal()}),0)})),this.englishPrintWarningModal.on("close",(function(){}))},handleDrawerPageMouseDown:function(e){var t=e.target;t.ancestor(".mobile-nav-drawer",!0)||t.ancestor(".mobile-nav-toggle",!0)||this.hideMobileNavDrawer()},handleDrawerItemClick:function(e){this.hideMobileNavDrawer()},showMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.addClass("drawer-open"),this.navDrawerShown=!0,this.navDrawer.addClass("shown"),e.fire("globalNav:navDrawerOpen"),clearTimeout(this.navDrawerOverlayHideTimeout),this.navDrawerOverlay&&(this.navDrawerOverlay.addClass("displayed"),setTimeout((function(){t.navDrawerOverlay.addClass("shown")}),10)),this.drawerPageClickHandler||setTimeout((function(){t.drawerPageClickHandler=e.on(["mousedown","touchstart"],t.handleDrawerPageMouseDown.bind(t)),t.registerEventHandler(t.drawerPageClickHandler)}),10)},hideMobileNavDrawer:function(){var t=this;this.get("container");this.contentContainer.removeClass("drawer-open"),this.navDrawerShown=!1,this.navDrawer.removeClass("shown"),e.fire("globalNav:navDrawerClosed"),this.navDrawerOverlay&&(this.navDrawerOverlay.removeClass("shown"),this.navDrawerOverlayHideTimeout=setTimeout((function(){t.navDrawerOverlay.removeClass("displayed")}),500)),this.drawerPageClickHandler&&(this.detachRegisteredEvent(this.drawerPageClickHandler),this.drawerPageClickHandler=void 0)},prepareOrderConfirmationModal:function(){var t,i=this,n=e.QueryString.parse(e.config.win.location.search.replace("?",""));e.config.win.location.href;this.photoPrintsHelper.isPrintFeatureEnabled()&&n&&void 0!==n.OrderID&&(t=n.OrderID,this.photoPrintsHelper.fetchOrder(t).then((function(e){i.showOrderConfirmationModal({orderId:e.orderId,orderUrl:e.orderUrl,email:e.email})})).catch((function(e){i.showOrderConfirmationModal({})})))},showOrderConfirmationModal:function(t){var i=this,n=this.templates("print-order-confirmation")({orderNum:t.orderId,orderUrl:t.orderUrl,email:t.email,helpUrl:"https://flickrhelp.com/",feedbackUrl:"/help/forum"}),o=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,maxHeight:!1,showHeader:!1,showFooter:!1,showCancelX:!1,width:460,htmlMessage:n});o.show(),o.on("activated",(function(){i.registerEventHandler(o.get("container").one("button.accept-button").on("click",(function(){o.close()})))}))},showIntroToPrintsModal:function(){var t=this,i=this.templates("intro-to-prints")({}),n=new e.Views.FluidModal({appContext:this.appContext,noScroll:!0,dismissOnOverlayClick:!0,maxHeight:!1,showHeader:!1,showFooter:!1,width:450,contentPadding:0,showCancelX:!0,htmlMessage:i});n.show(),n.on("activated",(function(){n.get("container").one(".accept-button").on("click",(function(e){n.close()}))})),n.on("close",(function(){var i=new Date;i.setTime(i.getTime()+36e10),t.appContext.setCookie({cookieName:e.config.flickr.flickrprints.dismiss_intro_to_prints_cookie_name,cookieValue:1,expires:i,path:"/"}),setTimeout((function(){t.showPrintSelector()}),0)}))},destructor:function(){e.AnchorRepositioner.removeOffset(t)}})}),"@VERSION@",{
requires:["flickr-view","hermes-template-global-nav","hermes-template-pending-gift-modal","hermes-template-upload-limit-message","hermes-template-print-order-confirmation","hermes-template-intro-to-prints","hermes-template-pro-hello-pro","search-url","search-autosuggest-field-view","querystring-parse-simple","querystring-stringify-simple","notifications-menu-view","url-helper","person-menu-view","group-menu-view","browser-support","fluid-modal-view","signup-modal-view","signin-helper","storage-helper","partner-account-banner-view","flickr-chat-center-view","featured-toast-view","user-limits-helper","photo-selector-view","fluid-modal-nav-bar-view","banner-view","photo-prints-helper","math-helper","slim-footer-view","subscriptions-helper","url"],optionalRequires:["hermes-core"],langBundles:["global-nav","common","search","upload-blocking","prints","blurb","thanks","gift-pro","checkout","errors"]});YUI.add("hermes-lang-global-nav_it-it",(function(e,a){e.Intl.add("hermes/global-nav","it-IT",{FLICKR_LOGO_ALT:[{type:0,value:"Logo Flickr. Se clicchi su di esso, vai alla home page"}],YOUR_PHOTOSTREAM:[{type:0,value:"Il tuo fotostream"}],FOLLOWING:[{type:0,value:"Stai seguendo"}],PHOTOS_OF:[{type:0,value:"Foto di"}],PHOTOS_FROM:[{type:0,value:"Foto scattate da"}],LIST:[{type:0,value:"Elenco"}],COMMUNITIES:[{type:0,value:"Community"}],GROUPS_LIST:[{type:0,value:"Elenco gruppi"}],SEARCH_GROUPS:[{type:0,value:"Cerca gruppi"}],RECENT_DISCUSSIONS:[{type:0,value:"Discussioni recenti"}],CREATE_A_GROUP:[{type:0,value:"Crea un gruppo"}],RECENT_PHOTOS:[{type:0,value:"Foto recenti"}],THE_COMMONS:[{type:0,value:"The Commons"}],GETTY_COLLECTION:[{type:0,value:"Raccolta Getty"}],GALLERIES:[{type:0,value:"Gallerie"}],FLICKR_GALLERIES:[{type:0,value:"Gallerie Flickr"}],WORLD_MAP:[{type:0,value:"Mappa del mondo"}],APP_GARDEN:[{type:0,value:"App Garden"}],THE_WEEKLY_FLICKR:[{type:0,value:"The Weekly Flickr"}],FLICKR_BLOG:[{type:0,value:"Blog di Flickr"}],UPLOAD:[{type:0,value:"Carica"}],SIGN_IN:[{type:0,value:"Entra"}],SEARCH:[{type:0,value:"Cerca"}],CAMERA_FINDER:[{type:0,value:"Cerca fotocamera"}],RECENT_ACTIVITY:[{type:0,value:"Attività recenti"}],STATS:[{type:0,value:"Statistiche"}],ORGANIZE:[{type:0,value:"Organizza"}],CREATIONS:[{type:0,value:"Creazioni"}],FIND_FRIENDS:[{type:0,value:"Trova amici"}],GROUPS:[{type:0,value:"Gruppi"}],PEOPLE:[{type:0,value:"Persone"}],CAMERAROLL:[{type:0,value:"Rullino "}],CREATE:[{type:0,value:"Crea"}],CREATE_NEW:[{type:0,value:"Nuova creazione"}],CREATE_MY_WALLART:[{type:0,value:"Il mio Wall Art"}],CREATE_MY_PHOTOS_BOOKS:[{type:0,value:"I miei Fotolibri"}],CREATE_ORDER_HISTORY:[{type:0,value:"La mia cronologia ordini"}],UPLOAD_MODAL_SIGNUP_TITLE:[{type:0,value:"Carica le tue foto in modo sicuro e privato!"}],UPLOAD_MODAL_SIGNUP_MESSAGE:[{type:0,value:"Iscriviti a Flickr per usufruire di 1.000 GB di spazio di archiviazione gratuito."}],HOME:[{type:0,value:"Home"}],LOG_IN:[{type:0,value:"Accedi"}]})}),"@VERSION@",{requires:["intl"]});